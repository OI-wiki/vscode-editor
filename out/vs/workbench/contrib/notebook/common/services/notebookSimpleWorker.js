/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/lifecycle","vs/base/common/buffer","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/stream","vs/base/common/errors","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/map","vs/base/common/arrays","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(Z){for(var e=[],R=0,F=Z.length;R<F;R++)e[R]=ne[Z[R]];return e};define(ne[12],ie([0,1,13,5]),function(Z,e,R,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function B(u){const f=u;return f?typeof f.read=="function":!1}e.isReadable=B;function S(u){const f=u;return f?[f.on,f.pause,f.resume,f.destroy].every(m=>typeof m=="function"):!1}e.isReadableStream=S;function M(u){const f=u;return f?S(f.stream)&&Array.isArray(f.buffer)&&typeof f.ended=="boolean":!1}e.isReadableBufferedStream=M;function k(u,f){return new A(u,f)}e.newWriteableStream=k;class A{constructor(f,m){this.reducer=f,this.options=m,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(f){if(!this.state.destroyed){if(this.state.flowing)this.emitData(f);else if(this.buffer.data.push(f),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(m=>this.pendingWritePromises.push(m))}}error(f){this.state.destroyed||(this.state.flowing?this.emitError(f):this.buffer.error.push(f))}end(f){this.state.destroyed||(typeof f!="undefined"&&this.write(f),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(f){this.listeners.data.slice(0).forEach(m=>m(f))}emitError(f){this.listeners.error.length===0?(0,R.onUnexpectedError)(f):this.listeners.error.slice(0).forEach(m=>m(f))}emitEnd(){this.listeners.end.slice(0).forEach(f=>f())}on(f,m){if(!this.state.destroyed)switch(f){case"data":this.listeners.data.push(m),this.resume();break;case"end":this.listeners.end.push(m),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(m),this.state.flowing&&this.flowErrors();break}}removeListener(f,m){if(this.state.destroyed)return;let I;switch(f){case"data":I=this.listeners.data;break;case"end":I=this.listeners.end;break;case"error":I=this.listeners.error;break}if(I){const L=I.indexOf(m);L>=0&&I.splice(L,1)}}flowData(){if(this.buffer.data.length>0){const f=this.reducer(this.buffer.data);this.emitData(f),this.buffer.data.length=0;const m=[...this.pendingWritePromises];this.pendingWritePromises.length=0,m.forEach(I=>I())}}flowErrors(){if(this.listeners.error.length>0){for(const f of this.buffer.error)this.emitError(f);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function w(u,f){const m=[];let I;for(;(I=u.read())!==null;)m.push(I);return f(m)}e.consumeReadable=w;function y(u,f,m){const I=[];let L;for(;(L=u.read())!==null&&I.length<m;)I.push(L);return L===null&&I.length>0?f(I):{read:()=>{if(I.length>0)return I.shift();if(typeof L!="undefined"){const D=L;return L=void 0,D}return u.read()}}}e.peekReadable=y;function T(u,f){return new Promise((m,I)=>{const L=[];_(u,{onData:D=>{f&&L.push(D)},onError:D=>{f?I(D):m(void 0)},onEnd:()=>{m(f?f(L):void 0)}})})}e.consumeStream=T;function _(u,f){let m=!1;return u.on("error",I=>{m||f.onError(I)}),u.on("end",()=>{m||f.onEnd()}),u.on("data",I=>{m||f.onData(I)}),(0,F.toDisposable)(()=>m=!0)}e.listenStream=_;function N(u,f){return new Promise((m,I)=>{const L=new F.DisposableStore,D=[],a=l=>{if(D.push(l),D.length>f)return L.dispose(),u.pause(),m({stream:u,buffer:D,ended:!1})},i=l=>I(l),h=()=>m({stream:u,buffer:D,ended:!0});L.add((0,F.toDisposable)(()=>u.removeListener("error",i))),u.on("error",i),L.add((0,F.toDisposable)(()=>u.removeListener("end",h))),u.on("end",h),L.add((0,F.toDisposable)(()=>u.removeListener("data",a))),u.on("data",a)})}e.peekStream=N;function b(u,f){const m=k(f);return m.end(u),m}e.toStream=b;function c(){const u=k(()=>{throw new Error("not supported")});return u.end(),u}e.emptyStream=c;function o(u){let f=!1;return{read:()=>f?null:(f=!0,u)}}e.toReadable=o;function t(u,f,m){const I=k(m);return _(u,{onData:L=>I.write(f.data(L)),onError:L=>I.error(f.error?f.error(L):L),onEnd:()=>I.end()}),I}e.transform=t;function s(u,f,m){let I=!1;return{read:()=>{const L=f.read();return I?L:(I=!0,L!==null?m([u,L]):u)}}}e.prefixedReadable=s;function r(u,f,m){let I=!1;const L=k(m);return _(f,{onData:D=>I?L.write(D):(I=!0,L.write(m([u,D]))),onError:D=>L.error(D),onEnd:()=>{I||(I=!0,L.write(u)),L.end()}}),L}e.prefixedStream=r}),define(ne[6],ie([0,1,12]),function(Z,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const F=typeof Buffer!="undefined";let B,S;class M{constructor(l){this.buffer=l,this.byteLength=this.buffer.byteLength}static alloc(l){return F?new M(Buffer.allocUnsafe(l)):new M(new Uint8Array(l))}static wrap(l){return F&&!Buffer.isBuffer(l)&&(l=Buffer.from(l.buffer,l.byteOffset,l.byteLength)),new M(l)}static fromString(l,g){return!(g?.dontUseNodeBuffer||!1)&&F?new M(Buffer.from(l)):(B||(B=new TextEncoder),new M(B.encode(l)))}static fromByteArray(l){const g=M.alloc(l.length);for(let v=0,q=l.length;v<q;v++)g.buffer[v]=l[v];return g}static concat(l,g){if(typeof g=="undefined"){g=0;for(let z=0,P=l.length;z<P;z++)g+=l[z].byteLength}const v=M.alloc(g);let q=0;for(let z=0,P=l.length;z<P;z++){const n=l[z];v.set(n,q),q+=n.byteLength}return v}clone(){const l=M.alloc(this.byteLength);return l.set(this),l}toString(){return F?this.buffer.toString():(S||(S=new TextDecoder),S.decode(this.buffer))}slice(l,g){return new M(this.buffer.subarray(l,g))}set(l,g){if(l instanceof M)this.buffer.set(l.buffer,g);else if(l instanceof Uint8Array)this.buffer.set(l,g);else if(l instanceof ArrayBuffer)this.buffer.set(new Uint8Array(l),g);else if(ArrayBuffer.isView(l))this.buffer.set(new Uint8Array(l.buffer,l.byteOffset,l.byteLength),g);else throw new Error("Unknown argument 'array'")}readUInt32BE(l){return w(this.buffer,l)}writeUInt32BE(l,g){y(this.buffer,l,g)}readUInt32LE(l){return T(this.buffer,l)}writeUInt32LE(l,g){_(this.buffer,l,g)}readUInt8(l){return N(this.buffer,l)}writeUInt8(l,g){b(this.buffer,l,g)}}e.VSBuffer=M;function k(h,l){return h[l+0]<<0>>>0|h[l+1]<<8>>>0}e.readUInt16LE=k;function A(h,l,g){h[g+0]=l&255,l=l>>>8,h[g+1]=l&255}e.writeUInt16LE=A;function w(h,l){return h[l]*2**24+h[l+1]*2**16+h[l+2]*2**8+h[l+3]}e.readUInt32BE=w;function y(h,l,g){h[g+3]=l,l=l>>>8,h[g+2]=l,l=l>>>8,h[g+1]=l,l=l>>>8,h[g]=l}e.writeUInt32BE=y;function T(h,l){return h[l+0]<<0>>>0|h[l+1]<<8>>>0|h[l+2]<<16>>>0|h[l+3]<<24>>>0}e.readUInt32LE=T;function _(h,l,g){h[g+0]=l&255,l=l>>>8,h[g+1]=l&255,l=l>>>8,h[g+2]=l&255,l=l>>>8,h[g+3]=l&255}e.writeUInt32LE=_;function N(h,l){return h[l]}e.readUInt8=N;function b(h,l,g){h[g]=l}e.writeUInt8=b;function c(h){return R.consumeReadable(h,l=>M.concat(l))}e.readableToBuffer=c;function o(h){return R.toReadable(h)}e.bufferToReadable=o;function t(h){return R.consumeStream(h,l=>M.concat(l))}e.streamToBuffer=t;async function s(h){return h.ended?M.concat(h.buffer):M.concat([...h.buffer,await t(h.stream)])}e.bufferedStreamToBuffer=s;function r(h){return R.toStream(h,l=>M.concat(l))}e.bufferToStream=r;function u(h){return R.transform(h,{data:l=>typeof l=="string"?M.fromString(l):M.wrap(l)},l=>M.concat(l))}e.streamToBufferReadableStream=u;function f(h){return R.newWriteableStream(l=>M.concat(l),h)}e.newWriteableBufferStream=f;function m(h,l){return R.prefixedReadable(h,l,g=>M.concat(g))}e.prefixedBufferReadable=m;function I(h,l){return R.prefixedStream(h,l,g=>M.concat(g))}e.prefixedBufferStream=I;function L(h){let l=0,g=0,v=0;const q=new Uint8Array(Math.floor(h.length/4*3)),z=n=>{switch(g){case 3:q[v++]=l|n,g=0;break;case 2:q[v++]=l|n>>>2,l=n<<6,g=3;break;case 1:q[v++]=l|n>>>4,l=n<<4,g=2;break;default:l=n<<2,g=1}};for(let n=0;n<h.length;n++){const p=h.charCodeAt(n);if(p>=65&&p<=90)z(p-65);else if(p>=97&&p<=122)z(p-97+26);else if(p>=48&&p<=57)z(p-48+52);else if(p===43||p===45)z(62);else if(p===47||p===95)z(63);else{if(p===61)break;throw new SyntaxError(`Unexpected base64 character ${h[n]}`)}}const P=v;for(;g>0;)z(0);return M.wrap(q).slice(0,P)}e.decodeBase64=L;const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function i({buffer:h},l=!0,g=!1){const v=g?a:D;let q="";const z=h.byteLength%3;let P=0;for(;P<h.byteLength-z;P+=3){const n=h[P+0],p=h[P+1],C=h[P+2];q+=v[n>>>2],q+=v[(n<<4|p>>>4)&63],q+=v[(p<<2|C>>>6)&63],q+=v[C&63]}if(z===1){const n=h[P+0];q+=v[n>>>2],q+=v[n<<4&63],l&&(q+="==")}else if(z===2){const n=h[P+0],p=h[P+1];q+=v[n>>>2],q+=v[(n<<4|p>>>4)&63],q+=v[p<<2&63],l&&(q+="=")}return q}e.encodeBase64=i}),define(ne[14],ie([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var R;(function(B){B[B.Unknown=0]="Unknown",B[B.Invalid=3]="Invalid",B[B.LF=1]="LF",B[B.CRLF=2]="CRLF"})(R=e.StringEOL||(e.StringEOL={}));function F(B){let S=0,M=0,k=0,A=0;for(let w=0,y=B.length;w<y;w++){const T=B.charCodeAt(w);T===13?(S===0&&(M=w),S++,w+1<y&&B.charCodeAt(w+1)===10?(A|=2,w++):A|=3,k=w+1):T===10&&(A|=1,S===0&&(M=w),S++,k=w+1)}return S===0&&(M=B.length),[S,M,B.length-k,A]}e.countEOL=F}),define(ne[15],ie([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.resetSentinel=e.calculateLF=e.calculateSize=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class R{constructor(o,t){this.piece=o,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return B(this.right);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.left!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}prev(){if(this.left!==e.SENTINEL)return S(this.left);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.right!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=R;var F;(function(c){c[c.Black=0]="Black",c[c.Red=1]="Red"})(F=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new R(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function B(c){for(;c.left!==e.SENTINEL;)c=c.left;return c}e.leftest=B;function S(c){for(;c.right!==e.SENTINEL;)c=c.right;return c}e.righttest=S;function M(c){return c===e.SENTINEL?0:c.size_left+c.piece.length+M(c.right)}e.calculateSize=M;function k(c){return c===e.SENTINEL?0:c.lf_left+c.piece.lineFeedCnt+k(c.right)}e.calculateLF=k;function A(){e.SENTINEL.parent=e.SENTINEL}e.resetSentinel=A;function w(c,o){const t=o.right;t.size_left+=o.size_left+(o.piece?o.piece.length:0),t.lf_left+=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),o.right=t.left,t.left!==e.SENTINEL&&(t.left.parent=o),t.parent=o.parent,o.parent===e.SENTINEL?c.root=t:o.parent.left===o?o.parent.left=t:o.parent.right=t,t.left=o,o.parent=t}e.leftRotate=w;function y(c,o){const t=o.left;o.left=t.right,t.right!==e.SENTINEL&&(t.right.parent=o),t.parent=o.parent,o.size_left-=t.size_left+(t.piece?t.piece.length:0),o.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),o.parent===e.SENTINEL?c.root=t:o===o.parent.right?o.parent.right=t:o.parent.left=t,t.right=o,o.parent=t}e.rightRotate=y;function T(c,o){let t,s;if(o.left===e.SENTINEL?(s=o,t=s.right):o.right===e.SENTINEL?(s=o,t=s.left):(s=B(o.right),t=s.right),s===c.root){c.root=t,t.color=0,o.detach(),A(),c.root.parent=e.SENTINEL;return}const r=s.color===1;if(s===s.parent.left?s.parent.left=t:s.parent.right=t,s===o?(t.parent=s.parent,b(c,t)):(s.parent===o?t.parent=s:t.parent=s.parent,b(c,t),s.left=o.left,s.right=o.right,s.parent=o.parent,s.color=o.color,o===c.root?c.root=s:o===o.parent.left?o.parent.left=s:o.parent.right=s,s.left!==e.SENTINEL&&(s.left.parent=s),s.right!==e.SENTINEL&&(s.right.parent=s),s.size_left=o.size_left,s.lf_left=o.lf_left,b(c,s)),o.detach(),t.parent.left===t){const f=M(t),m=k(t);if(f!==t.parent.size_left||m!==t.parent.lf_left){const I=f-t.parent.size_left,L=m-t.parent.lf_left;t.parent.size_left=f,t.parent.lf_left=m,N(c,t.parent,I,L)}}if(b(c,t.parent),r){A();return}let u;for(;t!==c.root&&t.color===0;)t===t.parent.left?(u=t.parent.right,u.color===1&&(u.color=0,t.parent.color=1,w(c,t.parent),u=t.parent.right),u.left.color===0&&u.right.color===0?(u.color=1,t=t.parent):(u.right.color===0&&(u.left.color=0,u.color=1,y(c,u),u=t.parent.right),u.color=t.parent.color,t.parent.color=0,u.right.color=0,w(c,t.parent),t=c.root)):(u=t.parent.left,u.color===1&&(u.color=0,t.parent.color=1,y(c,t.parent),u=t.parent.left),u.left.color===0&&u.right.color===0?(u.color=1,t=t.parent):(u.left.color===0&&(u.right.color=0,u.color=1,w(c,u),u=t.parent.left),u.color=t.parent.color,t.parent.color=0,u.left.color=0,y(c,t.parent),t=c.root));t.color=0,A()}e.rbDelete=T;function _(c,o){for(b(c,o);o!==c.root&&o.parent.color===1;)if(o.parent===o.parent.parent.left){const t=o.parent.parent.right;t.color===1?(o.parent.color=0,t.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.right&&(o=o.parent,w(c,o)),o.parent.color=0,o.parent.parent.color=1,y(c,o.parent.parent))}else{const t=o.parent.parent.left;t.color===1?(o.parent.color=0,t.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.left&&(o=o.parent,y(c,o)),o.parent.color=0,o.parent.parent.color=1,w(c,o.parent.parent))}c.root.color=0}e.fixInsert=_;function N(c,o,t,s){for(;o!==c.root&&o!==e.SENTINEL;)o.parent.left===o&&(o.parent.size_left+=t,o.parent.lf_left+=s),o=o.parent}e.updateTreeMetadata=N;function b(c,o){let t=0,s=0;if(o!==c.root){for(;o!==c.root&&o===o.parent.right;)o=o.parent;if(o!==c.root)for(o=o.parent,t=M(o.left)-o.size_left,s=k(o.left)-o.lf_left,o.size_left+=t,o.lf_left+=s;o!==c.root&&(t!==0||s!==0);)o.parent.left===o&&(o.parent.size_left+=t,o.parent.lf_left+=s),o=o.parent}}e.recomputeTreeMetadata=b}),define(ne[16],ie([0,1,4]),function(Z,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const F={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},B={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function S(y){const T=(0,R.extname)(y),_=F[T.toLowerCase()];return _!==void 0?_:M(y)}e.getMediaOrTextMime=S;function M(y){const T=(0,R.extname)(y);return B[T.toLowerCase()]}e.getMediaMime=M;function k(y){for(const T in B)if(B[T]===y)return T}e.getExtensionForMimeType=k;const A=/^(.+)\/(.+?)(;.+)?$/;function w(y,T){const _=A.exec(y);return _?`${_[1].toLowerCase()}/${_[2].toLowerCase()}${_[3]??""}`:T?void 0:y}e.normalizeMimeType=w}),define(ne[7],ie([0,1,4,2,3,31]),function(Z,e,R,F,B,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function M(a){return a===47||a===92}e.isPathSeparator=M;function k(a){return a.replace(/[\\/]/g,R.posix.sep)}e.toSlashes=k;function A(a){return a.indexOf("/")===-1&&(a=k(a)),/^[a-zA-Z]:(\/|$)/.test(a)&&(a="/"+a),a}e.toPosixPath=A;function w(a,i=R.posix.sep){if(!a)return"";const h=a.length,l=a.charCodeAt(0);if(M(l)){if(M(a.charCodeAt(1))&&!M(a.charCodeAt(2))){let v=3;const q=v;for(;v<h&&!M(a.charCodeAt(v));v++);if(q!==v&&!M(a.charCodeAt(v+1))){for(v+=1;v<h;v++)if(M(a.charCodeAt(v)))return a.slice(0,v+1).replace(/[\\/]/g,i)}}return i}else if(t(l)&&a.charCodeAt(1)===58)return M(a.charCodeAt(2))?a.slice(0,2)+i:a.slice(0,2);let g=a.indexOf("://");if(g!==-1){for(g+=3;g<h;g++)if(M(a.charCodeAt(g)))return a.slice(0,g+1)}return""}e.getRoot=w;function y(a){if(!F.isWindows||!a||a.length<5)return!1;let i=a.charCodeAt(0);if(i!==92||(i=a.charCodeAt(1),i!==92))return!1;let h=2;const l=h;for(;h<a.length&&(i=a.charCodeAt(h),i!==92);h++);return!(l===h||(i=a.charCodeAt(h+1),isNaN(i)||i===92))}e.isUNC=y;const T=/[\\/:\*\?"<>\|]/g,_=/[\\/]/g,N=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function b(a,i=F.isWindows){const h=i?T:_;return!(!a||a.length===0||/^\s+$/.test(a)||(h.lastIndex=0,h.test(a))||i&&N.test(a)||a==="."||a===".."||i&&a[a.length-1]==="."||i&&a.length!==a.trim().length||a.length>255)}e.isValidBasename=b;function c(a,i,h){const l=a===i;return!h||l?l:!a||!i?!1:(0,B.equalsIgnoreCase)(a,i)}e.isEqual=c;function o(a,i,h,l=R.sep){if(a===i)return!0;if(!a||!i||i.length>a.length)return!1;if(h){if(!(0,B.startsWithIgnoreCase)(a,i))return!1;if(i.length===a.length)return!0;let v=i.length;return i.charAt(i.length-1)===l&&v--,a.charAt(v)===l}return i.charAt(i.length-1)!==l&&(i+=l),a.indexOf(i)===0}e.isEqualOrParent=o;function t(a){return a>=65&&a<=90||a>=97&&a<=122}e.isWindowsDriveLetter=t;function s(a,i){return F.isWindows&&a.endsWith(":")&&(a+=R.sep),(0,R.isAbsolute)(a)||(a=(0,R.join)(i,a)),a=(0,R.normalize)(a),F.isWindows?(a=(0,B.rtrim)(a,R.sep),a.endsWith(":")&&(a+=R.sep)):(a=(0,B.rtrim)(a,R.sep),a||(a=R.sep)),a}e.sanitizeFilePath=s;function r(a){const i=(0,R.normalize)(a);return F.isWindows?a.length>3?!1:u(i)&&(a.length===2||i.charCodeAt(2)===92):i===R.posix.sep}e.isRootOrDriveLetter=r;function u(a,i=F.isWindows){return i?t(a.charCodeAt(0))&&a.charCodeAt(1)===58:!1}e.hasDriveLetter=u;function f(a){return u(a)?a[0]:void 0}e.getDriveLetter=f;function m(a,i,h){return i.length>a.length?-1:a===i?0:(h&&(a=a.toLowerCase(),i=i.toLowerCase()),a.indexOf(i))}e.indexOfPath=m;function I(a){const i=a.split(":");let h,l,g;for(const v of i){const q=Number(v);(0,S.isNumber)(q)?l===void 0?l=q:g===void 0&&(g=q):h=h?[h,v].join(":"):v}if(!h)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:h,line:l!==void 0?l:void 0,column:g!==void 0?g:l!==void 0?1:void 0}}e.parseLineAndColumnAware=I;const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function D(a,i,h=8){let l="";for(let v=0;v<h;v++)l+=L.charAt(Math.floor(Math.random()*L.length));let g;return i?g=`${i}-${l}`:g=l,a?(0,R.join)(a,g):g}e.randomPath=D});var le=this&&this.__classPrivateFieldSet||function(Z,e,R,F,B){if(F==="m")throw new TypeError("Private method is not writable");if(F==="a"&&!B)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?Z!==e||!B:!e.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return F==="a"?B.call(Z,R):B?B.value=R:e.set(Z,R),R},ae=this&&this.__classPrivateFieldGet||function(Z,e,R,F){if(R==="a"&&!F)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?Z!==e||!F:!e.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return R==="m"?F:R==="a"?F.call(Z):F?F.value:e.get(Z)};define(ne[17],ie([0,1,18,3]),function(Z,e,R,F){"use strict";var B,S,M,k;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadonlyMapView=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function A(a,i,h){let l=a.get(i);return l===void 0&&(l=h,a.set(i,l)),l}e.getOrSet=A;function w(a){const i=[];return a.forEach((h,l)=>{i.push(`${l} => ${h}`)}),`Map(${a.size}) {${i.join(", ")}}`}e.mapToString=w;function y(a){const i=[];return a.forEach(h=>{i.push(h)}),`Set(${a.size}) {${i.join(", ")}}`}e.setToString=y;class T{constructor(){this._value="",this._pos=0}reset(i){return this._value=i,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(i){const h=i.charCodeAt(0),l=this._value.charCodeAt(this._pos);return h-l}value(){return this._value[this._pos]}}e.StringIterator=T;class _{constructor(i=!0){this._caseSensitive=i}reset(i){return this._value=i,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let i=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(i)this._from++;else break;else i=!1;return this}cmp(i){return this._caseSensitive?(0,F.compareSubstring)(i,this._value,0,i.length,this._from,this._to):(0,F.compareSubstringIgnoreCase)(i,this._value,0,i.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=_;class N{constructor(i=!0,h=!0){this._splitOnBackslash=i,this._caseSensitive=h}reset(i){this._from=0,this._to=0,this._value=i,this._valueLen=i.length;for(let h=i.length-1;h>=0;h--,this._valueLen--){const l=this._value.charCodeAt(h);if(!(l===47||this._splitOnBackslash&&l===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let i=!0;for(;this._to<this._valueLen;this._to++){const h=this._value.charCodeAt(this._to);if(h===47||this._splitOnBackslash&&h===92)if(i)this._from++;else break;else i=!1}return this}cmp(i){return this._caseSensitive?(0,F.compareSubstring)(i,this._value,0,i.length,this._from,this._to):(0,F.compareSubstringIgnoreCase)(i,this._value,0,i.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=N;var b;(function(a){a[a.Scheme=1]="Scheme",a[a.Authority=2]="Authority",a[a.Path=3]="Path",a[a.Query=4]="Query",a[a.Fragment=5]="Fragment"})(b||(b={}));class c{constructor(i,h){this._ignorePathCasing=i,this._ignoreQueryAndFragment=h,this._states=[],this._stateIdx=0}reset(i){return this._value=i,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new N(!1,!this._ignorePathCasing(i)),this._pathIterator.reset(i.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(i)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(i){if(this._states[this._stateIdx]===1)return(0,F.compareIgnoreCase)(i,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,F.compareIgnoreCase)(i,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(i);if(this._states[this._stateIdx]===4)return(0,F.compare)(i,this._value.query);if(this._states[this._stateIdx]===5)return(0,F.compare)(i,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=c;class o{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const i=this.right;return this.right=i.left,i.left=this,this.updateHeight(),i.updateHeight(),i}rotateRight(){const i=this.left;return this.left=i.right,i.right=this,this.updateHeight(),i.updateHeight(),i}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var t;(function(a){a[a.Left=-1]="Left",a[a.Mid=0]="Mid",a[a.Right=1]="Right"})(t||(t={}));class s{constructor(i){this._iter=i}static forUris(i=()=>!1,h=()=>!1){return new s(new c(i,h))}static forPaths(i=!1){return new s(new N(void 0,!i))}static forStrings(){return new s(new T)}static forConfigKeys(){return new s(new _)}clear(){this._root=void 0}fill(i,h){if(h){const l=h.slice(0);(0,R.shuffle)(l);for(const g of l)this.set(g,i)}else{const l=i.slice(0);(0,R.shuffle)(l);for(const g of l)this.set(g[0],g[1])}}set(i,h){const l=this._iter.reset(i);let g;this._root||(this._root=new o,this._root.segment=l.value());const v=[];for(g=this._root;;){const z=l.cmp(g.segment);if(z>0)g.left||(g.left=new o,g.left.segment=l.value()),v.push([-1,g]),g=g.left;else if(z<0)g.right||(g.right=new o,g.right.segment=l.value()),v.push([1,g]),g=g.right;else if(l.hasNext())l.next(),g.mid||(g.mid=new o,g.mid.segment=l.value()),v.push([0,g]),g=g.mid;else break}const q=g.value;g.value=h,g.key=i;for(let z=v.length-1;z>=0;z--){const P=v[z][1];P.updateHeight();const n=P.balanceFactor();if(n<-1||n>1){const p=v[z][0],C=v[z+1][0];if(p===1&&C===1)v[z][1]=P.rotateLeft();else if(p===-1&&C===-1)v[z][1]=P.rotateRight();else if(p===1&&C===-1)P.right=v[z+1][1]=v[z+1][1].rotateRight(),v[z][1]=P.rotateLeft();else if(p===-1&&C===1)P.left=v[z+1][1]=v[z+1][1].rotateLeft(),v[z][1]=P.rotateRight();else throw new Error;if(z>0)switch(v[z-1][0]){case-1:v[z-1][1].left=v[z][1];break;case 1:v[z-1][1].right=v[z][1];break;case 0:v[z-1][1].mid=v[z][1];break}else this._root=v[0][1]}}return q}get(i){return this._getNode(i)?.value}_getNode(i){const h=this._iter.reset(i);let l=this._root;for(;l;){const g=h.cmp(l.segment);if(g>0)l=l.left;else if(g<0)l=l.right;else if(h.hasNext())h.next(),l=l.mid;else break}return l}has(i){const h=this._getNode(i);return!(h?.value===void 0&&h?.mid===void 0)}delete(i){return this._delete(i,!1)}deleteSuperstr(i){return this._delete(i,!0)}_delete(i,h){const l=this._iter.reset(i),g=[];let v=this._root;for(;v;){const q=l.cmp(v.segment);if(q>0)g.push([-1,v]),v=v.left;else if(q<0)g.push([1,v]),v=v.right;else if(l.hasNext())l.next(),g.push([0,v]),v=v.mid;else break}if(!!v){if(h?(v.left=void 0,v.mid=void 0,v.right=void 0,v.height=1):(v.key=void 0,v.value=void 0),!v.mid&&!v.value)if(v.left&&v.right){const q=this._min(v.right),{key:z,value:P,segment:n}=q;this._delete(q.key,!1),v.key=z,v.value=P,v.segment=n}else{const q=v.left??v.right;if(g.length>0){const[z,P]=g[g.length-1];switch(z){case-1:P.left=q;break;case 0:P.mid=q;break;case 1:P.right=q;break}}else this._root=q}for(let q=g.length-1;q>=0;q--){const z=g[q][1];z.updateHeight();const P=z.balanceFactor();if(P>1?(z.right.balanceFactor()>=0||(z.right=z.right.rotateRight()),g[q][1]=z.rotateLeft()):P<-1&&(z.left.balanceFactor()<=0||(z.left=z.left.rotateLeft()),g[q][1]=z.rotateRight()),q>0)switch(g[q-1][0]){case-1:g[q-1][1].left=g[q][1];break;case 1:g[q-1][1].right=g[q][1];break;case 0:g[q-1][1].mid=g[q][1];break}else this._root=g[0][1]}}}_min(i){for(;i.left;)i=i.left;return i}findSubstr(i){const h=this._iter.reset(i);let l=this._root,g;for(;l;){const v=h.cmp(l.segment);if(v>0)l=l.left;else if(v<0)l=l.right;else if(h.hasNext())h.next(),g=l.value||g,l=l.mid;else break}return l&&l.value||g}findSuperstr(i){const h=this._iter.reset(i);let l=this._root;for(;l;){const g=h.cmp(l.segment);if(g>0)l=l.left;else if(g<0)l=l.right;else if(h.hasNext())h.next(),l=l.mid;else return l.mid?this._entries(l.mid):void 0}}forEach(i){for(const[h,l]of this)i(l,h)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(i){!i||(i.left&&(yield*this._entries(i.left)),i.value&&(yield[i.key,i.value]),i.mid&&(yield*this._entries(i.mid)),i.right&&(yield*this._entries(i.right)))}_isBalanced(){const i=h=>{if(!h)return!0;const l=h.balanceFactor();return l<-1||l>1?!1:i(h.left)&&i(h.right)};return i(this._root)}}e.TernarySearchTree=s;class r{constructor(i,h){this.uri=i,this.value=h}}class u{constructor(i,h){this[B]="ResourceMap",i instanceof u?(this.map=new Map(i.map),this.toKey=h??u.defaultToKey):(this.map=new Map,this.toKey=i??u.defaultToKey)}set(i,h){return this.map.set(this.toKey(i),new r(i,h)),this}get(i){return this.map.get(this.toKey(i))?.value}has(i){return this.map.has(this.toKey(i))}get size(){return this.map.size}clear(){this.map.clear()}delete(i){return this.map.delete(this.toKey(i))}forEach(i,h){typeof h!="undefined"&&(i=i.bind(h));for(const[l,g]of this.map)i(g.value,g.uri,this)}*values(){for(const i of this.map.values())yield i.value}*keys(){for(const i of this.map.values())yield i.uri}*entries(){for(const i of this.map.values())yield[i.uri,i.value]}*[(B=Symbol.toStringTag,Symbol.iterator)](){for(const[,i]of this.map)yield[i.uri,i.value]}}e.ResourceMap=u,u.defaultToKey=a=>a.toString();class f{constructor(i,h){this[S]="ResourceSet",!i||typeof i=="function"?this._map=new u(i):(this._map=new u(h),i.forEach(this.add,this))}get size(){return this._map.size}add(i){return this._map.set(i,i),this}clear(){this._map.clear()}delete(i){return this._map.delete(i)}forEach(i,h){this._map.forEach((l,g)=>i.call(h,g,g,this))}has(i){return this._map.has(i)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(S=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=f;var m;(function(a){a[a.None=0]="None",a[a.AsOld=1]="AsOld",a[a.AsNew=2]="AsNew"})(m=e.Touch||(e.Touch={}));class I{constructor(){this[M]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(i){return this._map.has(i)}get(i,h=0){const l=this._map.get(i);if(!!l)return h!==0&&this.touch(l,h),l.value}set(i,h,l=0){let g=this._map.get(i);if(g)g.value=h,l!==0&&this.touch(g,l);else{switch(g={key:i,value:h,next:void 0,previous:void 0},l){case 0:this.addItemLast(g);break;case 1:this.addItemFirst(g);break;case 2:this.addItemLast(g);break;default:this.addItemLast(g);break}this._map.set(i,g),this._size++}return this}delete(i){return!!this.remove(i)}remove(i){const h=this._map.get(i);if(!!h)return this._map.delete(i),this.removeItem(h),this._size--,h.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const i=this._head;return this._map.delete(i.key),this.removeItem(i),this._size--,i.value}forEach(i,h){const l=this._state;let g=this._head;for(;g;){if(h?i.bind(h)(g.value,g.key,this):i(g.value,g.key,this),this._state!==l)throw new Error("LinkedMap got modified during iteration.");g=g.next}}keys(){const i=this,h=this._state;let l=this._head;const g={[Symbol.iterator](){return g},next(){if(i._state!==h)throw new Error("LinkedMap got modified during iteration.");if(l){const v={value:l.key,done:!1};return l=l.next,v}else return{value:void 0,done:!0}}};return g}values(){const i=this,h=this._state;let l=this._head;const g={[Symbol.iterator](){return g},next(){if(i._state!==h)throw new Error("LinkedMap got modified during iteration.");if(l){const v={value:l.value,done:!1};return l=l.next,v}else return{value:void 0,done:!0}}};return g}entries(){const i=this,h=this._state;let l=this._head;const g={[Symbol.iterator](){return g},next(){if(i._state!==h)throw new Error("LinkedMap got modified during iteration.");if(l){const v={value:[l.key,l.value],done:!1};return l=l.next,v}else return{value:void 0,done:!0}}};return g}[(M=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(i){if(i>=this.size)return;if(i===0){this.clear();return}let h=this._head,l=this.size;for(;h&&l>i;)this._map.delete(h.key),h=h.next,l--;this._head=h,this._size=l,h&&(h.previous=void 0),this._state++}addItemFirst(i){if(!this._head&&!this._tail)this._tail=i;else if(this._head)i.next=this._head,this._head.previous=i;else throw new Error("Invalid list");this._head=i,this._state++}addItemLast(i){if(!this._head&&!this._tail)this._head=i;else if(this._tail)i.previous=this._tail,this._tail.next=i;else throw new Error("Invalid list");this._tail=i,this._state++}removeItem(i){if(i===this._head&&i===this._tail)this._head=void 0,this._tail=void 0;else if(i===this._head){if(!i.next)throw new Error("Invalid list");i.next.previous=void 0,this._head=i.next}else if(i===this._tail){if(!i.previous)throw new Error("Invalid list");i.previous.next=void 0,this._tail=i.previous}else{const h=i.next,l=i.previous;if(!h||!l)throw new Error("Invalid list");h.previous=l,l.next=h}i.next=void 0,i.previous=void 0,this._state++}touch(i,h){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(h!==1&&h!==2)){if(h===1){if(i===this._head)return;const l=i.next,g=i.previous;i===this._tail?(g.next=void 0,this._tail=g):(l.previous=g,g.next=l),i.previous=void 0,i.next=this._head,this._head.previous=i,this._head=i,this._state++}else if(h===2){if(i===this._tail)return;const l=i.next,g=i.previous;i===this._head?(l.previous=void 0,this._head=l):(l.previous=g,g.next=l),i.next=void 0,i.previous=this._tail,this._tail.next=i,this._tail=i,this._state++}}}toJSON(){const i=[];return this.forEach((h,l)=>{i.push([l,h])}),i}fromJSON(i){this.clear();for(const[h,l]of i)this.set(h,l)}}e.LinkedMap=I;class L extends I{constructor(i,h=1){super();this._limit=i,this._ratio=Math.min(Math.max(0,h),1)}get limit(){return this._limit}set limit(i){this._limit=i,this.checkTrim()}get ratio(){return this._ratio}set ratio(i){this._ratio=Math.min(Math.max(0,i),1),this.checkTrim()}get(i,h=2){return super.get(i,h)}peek(i){return super.get(i,0)}set(i,h){return super.set(i,h,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=L;class D{constructor(i){k.set(this,void 0),le(this,k,i,"f")}get size(){return ae(this,k,"f").size}forEach(i,h){ae(this,k,"f").forEach(i,h)}get(i){return ae(this,k,"f").get(i)}has(i){return ae(this,k,"f").has(i)}entries(){return ae(this,k,"f").entries()}keys(){return ae(this,k,"f").keys()}values(){return ae(this,k,"f").values()}[(k=new WeakMap,Symbol.iterator)](){return ae(this,k,"f").entries()}}e.ReadonlyMapView=D}),define(ne[8],ie([0,1,2,9]),function(Z,e,R,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var B;(function(k){k.inMemory="inmemory",k.vscode="vscode",k.internal="private",k.walkThrough="walkThrough",k.walkThroughSnippet="walkThroughSnippet",k.http="http",k.https="https",k.file="file",k.mailto="mailto",k.untitled="untitled",k.data="data",k.command="command",k.vscodeRemote="vscode-remote",k.vscodeRemoteResource="vscode-remote-resource",k.vscodeUserData="vscode-userdata",k.vscodeCustomEditor="vscode-custom-editor",k.vscodeNotebook="vscode-notebook",k.vscodeNotebookCell="vscode-notebook-cell",k.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",k.vscodeNotebookCellOutput="vscode-notebook-cell-output",k.vscodeInteractive="vscode-interactive",k.vscodeInteractiveInput="vscode-interactive-input",k.vscodeSettings="vscode-settings",k.vscodeWorkspaceTrust="vscode-workspace-trust",k.vscodeTerminal="vscode-terminal",k.webviewPanel="webview-panel",k.vscodeWebview="vscode-webview",k.extension="extension",k.vscodeFileResource="vscode-file",k.tmp="tmp",k.vsls="vsls"})(B=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class S{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${B.vscodeRemoteResource}`}setPreferredWebSchema(A){this._preferredWebSchema=A}setDelegate(A){this._delegate=A}setServerRootPath(A){this._remoteResourcesPath=`${A}/${B.vscodeRemoteResource}`}set(A,w,y){this._hosts[A]=w,this._ports[A]=y}setConnectionToken(A,w){this._connectionTokens[A]=w}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(A){if(this._delegate)return this._delegate(A);const w=A.authority;let y=this._hosts[w];y&&y.indexOf(":")!==-1&&(y=`[${y}]`);const T=this._ports[w],_=this._connectionTokens[w];let N=`path=${encodeURIComponent(A.path)}`;return typeof _=="string"&&(N+=`&${e.connectionTokenQueryName}=${encodeURIComponent(_)}`),F.URI.from({scheme:R.isWeb?this._preferredWebSchema:B.vscodeRemoteResource,authority:`${y}:${T}`,path:this._remoteResourcesPath,query:N})}}e.RemoteAuthorities=new S;class M{asBrowserUri(A,w){const y=this.toUri(A,w);return y.scheme===B.vscodeRemote?e.RemoteAuthorities.rewrite(y):y.scheme===B.file&&(R.isNative||R.isWebWorker&&R.globals.origin===`${B.vscodeFileResource}://${M.FALLBACK_AUTHORITY}`)?y.with({scheme:B.vscodeFileResource,authority:y.authority||M.FALLBACK_AUTHORITY,query:null,fragment:null}):y}asFileUri(A,w){const y=this.toUri(A,w);return y.scheme===B.vscodeFileResource?y.with({scheme:B.file,authority:y.authority!==M.FALLBACK_AUTHORITY?y.authority:null,query:null,fragment:null}):y}toUri(A,w){return F.URI.isUri(A)?A:F.URI.parse(w.toUrl(A))}}M.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new M}),define(ne[19],ie([0,1,7,8,4,2,3,9]),function(Z,e,R,F,B,S,M,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function A(N){return(0,k.uriToFsPath)(N,!0)}e.originalFSPath=A;class w{constructor(b){this._ignorePathCasing=b}compare(b,c,o=!1){return b===c?0:(0,M.compare)(this.getComparisonKey(b,o),this.getComparisonKey(c,o))}isEqual(b,c,o=!1){return b===c?!0:!b||!c?!1:this.getComparisonKey(b,o)===this.getComparisonKey(c,o)}getComparisonKey(b,c=!1){return b.with({path:this._ignorePathCasing(b)?b.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(b){return this._ignorePathCasing(b)}isEqualOrParent(b,c,o=!1){if(b.scheme===c.scheme){if(b.scheme===F.Schemas.file)return R.isEqualOrParent(A(b),A(c),this._ignorePathCasing(b))&&b.query===c.query&&(o||b.fragment===c.fragment);if((0,e.isEqualAuthority)(b.authority,c.authority))return R.isEqualOrParent(b.path,c.path,this._ignorePathCasing(b),"/")&&b.query===c.query&&(o||b.fragment===c.fragment)}return!1}joinPath(b,...c){return k.URI.joinPath(b,...c)}basenameOrAuthority(b){return(0,e.basename)(b)||b.authority}basename(b){return B.posix.basename(b.path)}extname(b){return B.posix.extname(b.path)}dirname(b){if(b.path.length===0)return b;let c;return b.scheme===F.Schemas.file?c=k.URI.file(B.dirname(A(b))).path:(c=B.posix.dirname(b.path),b.authority&&c.length&&c.charCodeAt(0)!==47&&(console.error(`dirname("${b.toString})) resulted in a relative path`),c="/")),b.with({path:c})}normalizePath(b){if(!b.path.length)return b;let c;return b.scheme===F.Schemas.file?c=k.URI.file(B.normalize(A(b))).path:c=B.posix.normalize(b.path),b.with({path:c})}relativePath(b,c){if(b.scheme!==c.scheme||!(0,e.isEqualAuthority)(b.authority,c.authority))return;if(b.scheme===F.Schemas.file){const s=B.relative(A(b),A(c));return S.isWindows?R.toSlashes(s):s}let o=b.path||"/";const t=c.path||"/";if(this._ignorePathCasing(b)){let s=0;for(const r=Math.min(o.length,t.length);s<r&&!(o.charCodeAt(s)!==t.charCodeAt(s)&&o.charAt(s).toLowerCase()!==t.charAt(s).toLowerCase());s++);o=t.substr(0,s)+o.substr(s)}return B.posix.relative(o,t)}resolvePath(b,c){if(b.scheme===F.Schemas.file){const o=k.URI.file(B.resolve(A(b),c));return b.with({authority:o.authority,path:o.path})}return c=R.toPosixPath(c),b.with({path:B.posix.resolve(b.path,c)})}isAbsolutePath(b){return!!b.path&&b.path[0]==="/"}isEqualAuthority(b,c){return b===c||b!==void 0&&c!==void 0&&(0,M.equalsIgnoreCase)(b,c)}hasTrailingPathSeparator(b,c=B.sep){if(b.scheme===F.Schemas.file){const o=A(b);return o.length>R.getRoot(o).length&&o[o.length-1]===c}else{const o=b.path;return o.length>1&&o.charCodeAt(o.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(b.fsPath)}}removeTrailingPathSeparator(b,c=B.sep){return(0,e.hasTrailingPathSeparator)(b,c)?b.with({path:b.path.substr(0,b.path.length-1)}):b}addTrailingPathSeparator(b,c=B.sep){let o=!1;if(b.scheme===F.Schemas.file){const t=A(b);o=t!==void 0&&t.length===R.getRoot(t).length&&t[t.length-1]===c}else{c="/";const t=b.path;o=t.length===1&&t.charCodeAt(t.length-1)===47}return!o&&!(0,e.hasTrailingPathSeparator)(b,c)?b.with({path:b.path+"/"}):b}}e.ExtUri=w,e.extUri=new w(()=>!1),e.extUriBiasedIgnorePathCase=new w(N=>N.scheme===F.Schemas.file?!S.isLinux:!0),e.extUriIgnorePathCase=new w(N=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function y(N,b){const c=[];for(let o=0;o<N.length;o++){const t=b(N[o]);N.some((s,r)=>r===o?!1:(0,e.isEqualOrParent)(t,b(s)))||c.push(N[o])}return c}e.distinctParents=y;var T;(function(N){N.META_DATA_LABEL="label",N.META_DATA_DESCRIPTION="description",N.META_DATA_SIZE="size",N.META_DATA_MIME="mime";function b(c){const o=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(r=>{const[u,f]=r.split(":");u&&f&&o.set(u,f)});const s=c.path.substring(0,c.path.indexOf(";"));return s&&o.set(N.META_DATA_MIME,s),o}N.parseMetaData=b})(T=e.DataUri||(e.DataUri={}));function _(N,b,c){if(b){let o=N.path;return o&&o[0]!==B.posix.sep&&(o=B.posix.sep+o),N.with({scheme:c,authority:b,path:o})}return N.with({scheme:c})}e.toLocalResource=_}),define(ne[20],ie([0,1,32,13,21,5,19,2]),function(Z,e,R,F,B,S,M,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function A(W){return!!W&&typeof W.then=="function"}e.isThenable=A;function w(W){const d=new R.CancellationTokenSource,E=W(d.token),O=new Promise((U,x)=>{const X=d.token.onCancellationRequested(()=>{X.dispose(),d.dispose(),x(new F.CancellationError)});Promise.resolve(E).then(ee=>{X.dispose(),d.dispose(),U(ee)},ee=>{X.dispose(),d.dispose(),x(ee)})});return new class{cancel(){d.cancel()}then(U,x){return O.then(U,x)}catch(U){return this.then(void 0,U)}finally(U){return O.finally(U)}}}e.createCancelablePromise=w;function y(W,d,E){return new Promise((O,U)=>{const x=d.onCancellationRequested(()=>{x.dispose(),O(E)});W.then(O,U).finally(()=>x.dispose())})}e.raceCancellation=y;function T(W,d){return new Promise((E,O)=>{const U=d.onCancellationRequested(()=>{U.dispose(),O(new F.CancellationError)});W.then(E,O).finally(()=>U.dispose())})}e.raceCancellationError=T;async function _(W){let d=-1;const E=W.map((U,x)=>U.then(X=>(d=x,X))),O=await Promise.race(E);return W.forEach((U,x)=>{x!==d&&U.cancel()}),O}e.raceCancellablePromises=_;function N(W,d,E){let O;const U=setTimeout(()=>{O?.(void 0),E?.()},d);return Promise.race([W.finally(()=>clearTimeout(U)),new Promise(x=>O=x)])}e.raceTimeout=N;function b(W){return new Promise((d,E)=>{const O=W();A(O)?O.then(d,E):d(O)})}e.asPromise=b;class c{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(d){if(this.activePromise){if(this.queuedPromiseFactory=d,!this.queuedPromise){const E=()=>{this.queuedPromise=null;const O=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,O};this.queuedPromise=new Promise(O=>{this.activePromise.then(E,E).then(O)})}return new Promise((E,O)=>{this.queuedPromise.then(E,O)})}return this.activePromise=d(),new Promise((E,O)=>{this.activePromise.then(U=>{this.activePromise=null,E(U)},U=>{this.activePromise=null,O(U)})})}}e.Throttler=c;class o{constructor(){this.current=Promise.resolve(null)}queue(d){return this.current=this.current.then(()=>d(),()=>d())}}e.Sequencer=o;class t{constructor(){this.promiseMap=new Map}queue(d,E){const U=(this.promiseMap.get(d)??Promise.resolve()).catch(()=>{}).then(E).finally(()=>{this.promiseMap.get(d)===U&&this.promiseMap.delete(d)});return this.promiseMap.set(d,U),U}}e.SequencerByKey=t;const s=(W,d)=>{let E=!0;const O=setTimeout(()=>{E=!1,d()},W);return{isTriggered:()=>E,dispose:()=>{clearTimeout(O),E=!1}}},r=W=>{let d=!0;return queueMicrotask(()=>{d&&(d=!1,W())}),{isTriggered:()=>d,dispose:()=>{d=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class u{constructor(d){this.defaultDelay=d,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(d,E=this.defaultDelay){this.task=d,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((U,x)=>{this.doResolve=U,this.doReject=x}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const U=this.task;return this.task=null,U()}}));const O=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=E===e.MicrotaskDelay?r(O):s(E,O),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new F.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=u;class f{constructor(d){this.delayer=new u(d),this.throttler=new c}trigger(d,E){return this.delayer.trigger(()=>this.throttler.queue(d),E)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=f;class m{constructor(){this._isOpen=!1,this._promise=new Promise((d,E)=>{this._completePromise=d})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=m;class I extends m{constructor(d){super();this._timeout=setTimeout(()=>this.open(),d)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=I;function L(W,d){return d?new Promise((E,O)=>{const U=setTimeout(()=>{x.dispose(),E()},W),x=d.onCancellationRequested(()=>{clearTimeout(U),x.dispose(),O(new F.CancellationError)})}):w(E=>L(W,E))}e.timeout=L;function D(W,d=0){const E=setTimeout(W,d);return(0,S.toDisposable)(()=>clearTimeout(E))}e.disposableTimeout=D;function a(W){const d=[];let E=0;const O=W.length;function U(){return E<O?W[E++]():null}function x(X){X!=null&&d.push(X);const ee=U();return ee?ee.then(x):Promise.resolve(d)}return Promise.resolve(null).then(x)}e.sequence=a;function i(W,d=O=>!!O,E=null){let O=0;const U=W.length,x=()=>{if(O>=U)return Promise.resolve(E);const X=W[O++];return Promise.resolve(X()).then(re=>d(re)?Promise.resolve(re):x())};return x()}e.first=i;function h(W,d=O=>!!O,E=null){if(W.length===0)return Promise.resolve(E);let O=W.length;const U=()=>{O=-1;for(const x of W)x.cancel?.()};return new Promise((x,X)=>{for(const ee of W)ee.then(re=>{--O>=0&&d(re)?(U(),x(re)):O===0&&x(E)}).catch(re=>{--O>=0&&(U(),X(re))})})}e.firstParallel=h;class l{constructor(d){this._size=0,this.maxDegreeOfParalellism=d,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new B.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(d){return this._size++,new Promise((E,O)=>{this.outstandingPromises.push({factory:d,c:E,e:O}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const d=this.outstandingPromises.shift();this.runningPromises++;const E=d.factory();E.then(d.c,d.e),E.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=l;class g extends l{constructor(){super(1)}}e.Queue=g;class v{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const d=new $;return this.drainers.add(d),d.p}isDrained(){for(const[,d]of this.queues)if(d.size>0)return!1;return!0}queueFor(d,E=M.extUri){const O=E.getComparisonKey(d);let U=this.queues.get(O);return U||(U=new g,B.Event.once(U.onDrained)(()=>{U?.dispose(),this.queues.delete(O),this.onDidQueueDrain()}),this.queues.set(O,U)),U}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const d of this.drainers)d.complete();this.drainers.clear()}dispose(){for(const[,d]of this.queues)d.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=v;class q{constructor(d,E){this._token=-1,typeof d=="function"&&typeof E=="number"&&this.setIfNotSet(d,E)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(d,E){this.cancel(),this._token=setTimeout(()=>{this._token=-1,d()},E)}setIfNotSet(d,E){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,d()},E))}}e.TimeoutTimer=q;class z{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(d,E){this.cancel(),this._token=setInterval(()=>{d()},E)}}e.IntervalTimer=z;class P{constructor(d,E){this.timeoutToken=-1,this.runner=d,this.timeout=E,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(d=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,d)}get delay(){return this.timeout}set delay(d){this.timeout=d}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=P;class n{constructor(d,E){E%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${E}ms is not a multiple of 1000ms.`),this.runner=d,this.timeout=E,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(d=this.timeout){d%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${d}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(d/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=n;class p extends P{constructor(d,E){super(d,E);this.units=[]}work(d){this.units.push(d),this.isScheduled()||this.schedule()}doRun(){const d=this.units;this.units=[],this.runner?.(d)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=p;class C extends S.Disposable{constructor(d,E){super();this.options=d,this.handler=E,this.pendingWork=[],this.throttler=this._register(new S.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(d){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+d.length>this.options.maxBufferedWork)return!1}else if(this.pending+d.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...d),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new P(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=C,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=W=>{(0,k.setTimeout0)(()=>{if(d)return;const E=Date.now()+15;W(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,E-Date.now())}}))});let d=!1;return{dispose(){d||(d=!0)}}}:e.runWhenIdle=(W,d)=>{const E=requestIdleCallback(W,typeof d=="number"?{timeout:d}:void 0);let O=!1;return{dispose(){O||(O=!0,cancelIdleCallback(E))}}}}();class j{constructor(d){this._didRun=!1,this._executor=()=>{try{this._value=d()}catch(E){this._error=E}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=j;async function Y(W,d,E){let O;for(let U=0;U<E;U++)try{return await W()}catch(x){O=x,await L(d)}throw O}e.retry=Y;class J{hasPending(d){return this._pending?typeof d=="number"?this._pending.taskId===d:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(d,E,O){return this._pending={taskId:d,cancel:()=>O?.(),promise:E},E.then(()=>this.donePending(d),()=>this.donePending(d)),E}donePending(d){this._pending&&d===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const d=this._next;this._next=void 0,d.run().then(d.promiseResolve,d.promiseReject)}}setNext(d){if(this._next)this._next.run=d;else{let E,O;const U=new Promise((x,X)=>{E=x,O=X});this._next={run:d,promise:U,promiseResolve:E,promiseReject:O}}return this._next.promise}}e.TaskSequentializer=J;class te{constructor(d,E=()=>Date.now()){this.interval=d,this.nowFn=E,this.lastIncrementTime=0,this.value=0}increment(){const d=this.nowFn();return d-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=d,this.value=0),this.value++,this.value}}e.IntervalCounter=te;class ${constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((d,E)=>{this.completeCallback=d,this.errorCallback=E})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(d){return new Promise(E=>{this.completeCallback(d),this.resolved=!0,E()})}error(d){return new Promise(E=>{this.errorCallback(d),this.rejected=!0,E()})}cancel(){new Promise(d=>{this.errorCallback(new F.CancellationError),this.rejected=!0,d()})}}e.DeferredPromise=$;var K;(function(W){async function d(O){let U;const x=await Promise.all(O.map(X=>X.then(ee=>ee,ee=>{U||(U=ee)})));if(typeof U!="undefined")throw U;return x}W.settled=d;function E(O){return new Promise(async(U,x)=>{try{await O(U,x)}catch(X){x(X)}})}W.withAsyncBody=E})(K=e.Promises||(e.Promises={}));var V;(function(W){W[W.Initial=0]="Initial",W[W.DoneOK=1]="DoneOK",W[W.DoneError=2]="DoneError"})(V||(V={}));class H{constructor(d){this._state=0,this._results=[],this._error=null,this._onStateChanged=new B.Emitter,queueMicrotask(async()=>{const E={emitOne:O=>this.emitOne(O),emitMany:O=>this.emitMany(O),reject:O=>this.reject(O)};try{await Promise.resolve(d(E)),this.resolve()}catch(O){this.reject(O)}finally{E.emitOne=void 0,E.emitMany=void 0,E.reject=void 0}})}static fromArray(d){return new H(E=>{E.emitMany(d)})}static fromPromise(d){return new H(async E=>{E.emitMany(await d)})}static fromPromises(d){return new H(async E=>{await Promise.all(d.map(async O=>E.emitOne(await O)))})}static merge(d){return new H(async E=>{await Promise.all(d.map(async O=>{for await(const U of O)E.emitOne(U)}))})}[Symbol.asyncIterator](){let d=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(d<this._results.length)return{done:!1,value:this._results[d++]};if(this._state===1)return{done:!0,value:void 0};await B.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(d,E){return new H(async O=>{for await(const U of d)O.emitOne(E(U))})}map(d){return H.map(this,d)}static filter(d,E){return new H(async O=>{for await(const U of d)E(U)&&O.emitOne(U)})}filter(d){return H.filter(this,d)}static coalesce(d){return H.filter(d,E=>!!E)}coalesce(){return H.coalesce(this)}static async toPromise(d){const E=[];for await(const O of d)E.push(O);return E}toPromise(){return H.toPromise(this)}emitOne(d){this._state===0&&(this._results.push(d),this._onStateChanged.fire())}emitMany(d){this._state===0&&(this._results=this._results.concat(d),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(d){this._state===0&&(this._state=2,this._error=d,this._onStateChanged.fire())}}e.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class G extends H{constructor(d,E){super(E);this._source=d}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=G;function Q(W){const d=new R.CancellationTokenSource,E=W(d.token);return new G(d,async O=>{const U=d.token.onCancellationRequested(()=>{U.dispose(),d.dispose(),O.reject(new F.CancellationError)});try{for await(const x of E){if(d.token.isCancellationRequested)return;O.emitOne(x)}U.dispose(),d.dispose()}catch(x){U.dispose(),d.dispose(),O.reject(x)}})}e.createCancelableAsyncIterable=Q}),define(ne[22],ie([0,1,18,20,7,17,4,2,3]),function(Z,e,R,F,B,S,M,k,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function w(){return Object.create(null)}e.getEmptyExpression=w,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const y="[/\\\\]",T="[^/\\\\]",_=/\//g;function N($,K){switch($){case 0:return"";case 1:return`${T}*?`;default:return`(?:${y}|${T}+${y}${K?`|${y}${T}+`:""})*?`}}function b($,K){if(!$)return[];const V=[];let H=!1,G=!1,Q="";for(const W of $){switch(W){case K:if(!H&&!G){V.push(Q),Q="";continue}break;case"{":H=!0;break;case"}":H=!1;break;case"[":G=!0;break;case"]":G=!1;break}Q+=W}return Q&&V.push(Q),V}e.splitGlobAware=b;function c($){if(!$)return"";let K="";const V=b($,e.GLOB_SPLIT);if(V.every(H=>H===e.GLOBSTAR))K=".*";else{let H=!1;V.forEach((G,Q)=>{if(G===e.GLOBSTAR){if(H)return;K+=N(2,Q===V.length-1)}else{let W=!1,d="",E=!1,O="";for(const U of G){if(U!=="}"&&W){d+=U;continue}if(E&&(U!=="]"||!O)){let x;U==="-"?x=U:(U==="^"||U==="!")&&!O?x="^":U===e.GLOB_SPLIT?x="":x=(0,A.escapeRegExpCharacters)(U),O+=x;continue}switch(U){case"{":W=!0;continue;case"[":E=!0;continue;case"}":{K+=`(?:${b(d,",").map(ee=>c(ee)).join("|")})`,W=!1,d="";break}case"]":{K+="["+O+"]",E=!1,O="";break}case"?":K+=T;continue;case"*":K+=N(1);continue;default:K+=(0,A.escapeRegExpCharacters)(U)}}Q<V.length-1&&(V[Q+1]!==e.GLOBSTAR||Q+2<V.length)&&(K+=y)}H=G===e.GLOBSTAR})}return K}const o=/^\*\*\/\*\.[\w\.-]+$/,t=/^\*\*\/([\w\.-]+)\/?$/,s=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,u=/^\*\*((\/[\w\.-]+)+)\/?$/,f=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,m=new S.LRUCache(1e4),I=function(){return!1},L=function(){return null};function D($,K){if(!$)return L;let V;typeof $!="string"?V=$.pattern:V=$,V=V.trim();const H=`${V}_${!!K.trimForExclusions}`;let G=m.get(H);if(G)return a(G,$);let Q;return o.test(V)?G=h(V.substr(4),V):(Q=t.exec(i(V,K)))?G=l(Q[1],V):(K.trimForExclusions?r:s).test(V)?G=g(V,K):(Q=u.exec(i(V,K)))?G=v(Q[1].substr(1),V,!0):(Q=f.exec(i(V,K)))?G=v(Q[1],V,!1):G=q(V),m.set(H,G),a(G,$)}function a($,K){if(typeof K=="string")return $;const V=function(H,G){return(0,B.isEqualOrParent)(H,K.base,!k.isLinux)?$(H.substr(K.base.length+1),G):null};return V.allBasenames=$.allBasenames,V.allPaths=$.allPaths,V.basenames=$.basenames,V.patterns=$.patterns,V}function i($,K){return K.trimForExclusions&&$.endsWith("/**")?$.substr(0,$.length-2):$}function h($,K){return function(V,H){return typeof V=="string"&&V.endsWith($)?K:null}}function l($,K){const V=`/${$}`,H=`\\${$}`,G=function(W,d){return typeof W!="string"?null:d?d===$?K:null:W===$||W.endsWith(V)||W.endsWith(H)?K:null},Q=[$];return G.basenames=Q,G.patterns=[K],G.allBasenames=Q,G}function g($,K){const V=J($.slice(1,-1).split(",").map(d=>D(d,K)).filter(d=>d!==L),$),H=V.length;if(!H)return L;if(H===1)return V[0];const G=function(d,E){for(let O=0,U=V.length;O<U;O++)if(V[O](d,E))return $;return null},Q=V.find(d=>!!d.allBasenames);Q&&(G.allBasenames=Q.allBasenames);const W=V.reduce((d,E)=>E.allPaths?d.concat(E.allPaths):d,[]);return W.length&&(G.allPaths=W),G}function v($,K,V){const H=M.sep===M.posix.sep,G=H?$:$.replace(_,M.sep),Q=M.sep+G,W=M.posix.sep+$;let d;return V?d=function(E,O){return typeof E=="string"&&(E===G||E.endsWith(Q)||!H&&(E===$||E.endsWith(W)))?K:null}:d=function(E,O){return typeof E=="string"&&(E===G||!H&&E===$)?K:null},d.allPaths=[(V?"*/":"./")+$],d}function q($){try{const K=new RegExp(`^${c($)}$`);return function(V){return K.lastIndex=0,typeof V=="string"&&K.test(V)?$:null}}catch{return L}}function z($,K,V){return!$||typeof K!="string"?!1:P($)(K,void 0,V)}e.match=z;function P($,K={}){if(!$)return I;if(typeof $=="string"||n($)){const V=D($,K);if(V===L)return I;const H=function(G,Q){return!!V(G,Q)};return V.allBasenames&&(H.allBasenames=V.allBasenames),V.allPaths&&(H.allPaths=V.allPaths),H}return j($,K)}e.parse=P;function n($){const K=$;return K?typeof K.base=="string"&&typeof K.pattern=="string":!1}e.isRelativePattern=n;function p($){return $.allBasenames||[]}e.getBasenameTerms=p;function C($){return $.allPaths||[]}e.getPathTerms=C;function j($,K){const V=J(Object.getOwnPropertyNames($).map(d=>Y(d,$[d],K)).filter(d=>d!==L)),H=V.length;if(!H)return L;if(!V.some(d=>!!d.requiresSiblings)){if(H===1)return V[0];const d=function(U,x){let X;for(let ee=0,re=V.length;ee<re;ee++){const se=V[ee](U,x);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(X||(X=[]),X.push(se))}return X?(async()=>{for(const ee of X){const re=await ee;if(typeof re=="string")return re}return null})():null},E=V.find(U=>!!U.allBasenames);E&&(d.allBasenames=E.allBasenames);const O=V.reduce((U,x)=>x.allPaths?U.concat(x.allPaths):U,[]);return O.length&&(d.allPaths=O),d}const G=function(d,E,O){let U,x;for(let X=0,ee=V.length;X<ee;X++){const re=V[X];re.requiresSiblings&&O&&(E||(E=(0,M.basename)(d)),U||(U=E.substr(0,E.length-(0,M.extname)(d).length)));const se=re(d,E,U,O);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(x||(x=[]),x.push(se))}return x?(async()=>{for(const X of x){const ee=await X;if(typeof ee=="string")return ee}return null})():null},Q=V.find(d=>!!d.allBasenames);Q&&(G.allBasenames=Q.allBasenames);const W=V.reduce((d,E)=>E.allPaths?d.concat(E.allPaths):d,[]);return W.length&&(G.allPaths=W),G}function Y($,K,V){if(K===!1)return L;const H=D($,V);if(H===L)return L;if(typeof K=="boolean")return H;if(K){const G=K.when;if(typeof G=="string"){const Q=(W,d,E,O)=>{if(!O||!H(W,d))return null;const U=G.replace("$(basename)",E),x=O(U);return(0,F.isThenable)(x)?x.then(X=>X?$:null):x?$:null};return Q.requiresSiblings=!0,Q}}return H}function J($,K){const V=$.filter(d=>!!d.basenames);if(V.length<2)return $;const H=V.reduce((d,E)=>{const O=E.basenames;return O?d.concat(O):d},[]);let G;if(K){G=[];for(let d=0,E=H.length;d<E;d++)G.push(K)}else G=V.reduce((d,E)=>{const O=E.patterns;return O?d.concat(O):d},[]);const Q=function(d,E){if(typeof d!="string")return null;if(!E){let U;for(U=d.length;U>0;U--){const x=d.charCodeAt(U-1);if(x===47||x===92)break}E=d.substr(U)}const O=H.indexOf(E);return O!==-1?G[O]:null};Q.basenames=H,Q.patterns=G,Q.allBasenames=H;const W=$.filter(d=>!d.basenames);return W.push(Q),W}function te($,K){return(0,R.equals)($,K,(V,H)=>typeof V=="string"&&typeof H=="string"?V===H:typeof V!="string"&&typeof H!="string"?V.base===H.base&&V.pattern===H.pattern:!1)}e.patternsEquals=te}),define(ne[23],ie([0,1,3,2,6]),function(Z,e,R,F,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUTF16LE=e.createStringBuilder=e.hasTextDecoder=e.getPlatformTextDecoder=void 0;let S;function M(){return S||(S=new TextDecoder("UTF-16LE")),S}let k;function A(){return k||(k=new TextDecoder("UTF-16BE")),k}let w;function y(){return w||(w=F.isLittleEndian()?M():A()),w}e.getPlatformTextDecoder=y,e.hasTextDecoder=typeof TextDecoder!="undefined",e.hasTextDecoder?(e.createStringBuilder=c=>new N(c),e.decodeUTF16LE=T):(e.createStringBuilder=c=>new b,e.decodeUTF16LE=_);function T(c,o,t){const s=new Uint16Array(c.buffer,o,t);return t>0&&(s[0]===65279||s[0]===65534)?_(c,o,t):M().decode(s)}function _(c,o,t){const s=[];let r=0;for(let u=0;u<t;u++){const f=B.readUInt16LE(c,o);o+=2,s[r++]=String.fromCharCode(f)}return s.join("")}class N{constructor(o){this._capacity=o|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const o=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return y().decode(o)}_flushBuffer(){const o=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[o]:this._completedStrings[this._completedStrings.length]=o}write1(o){const t=this._capacity-this._bufferLength;t<=1&&(t===0||R.isHighSurrogate(o))&&this._flushBuffer(),this._buffer[this._bufferLength++]=o}appendASCII(o){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=o}appendASCIIString(o){const t=o.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=o;return}for(let s=0;s<t;s++)this._buffer[this._bufferLength++]=o.charCodeAt(s)}}class b{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(o){this._pieces[this._piecesLen++]=String.fromCharCode(o)}appendASCII(o){this._pieces[this._piecesLen++]=String.fromCharCode(o)}appendASCIIString(o){this._pieces[this._piecesLen++]=o}}}),define(ne[24],ie([0,1,6,23]),function(Z,e,R,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function B(A){return A.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class S{constructor(w,y,T,_){this.oldPosition=w,this.oldText=y,this.newPosition=T,this.newText=_}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${B(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${B(this.oldText)}")`:`(replace@${this.oldPosition} "${B(this.oldText)}" with "${B(this.newText)}")`}static _writeStringSize(w){return 4+2*w.length}static _writeString(w,y,T){const _=y.length;R.writeUInt32BE(w,_,T),T+=4;for(let N=0;N<_;N++)R.writeUInt16LE(w,y.charCodeAt(N),T),T+=2;return T}static _readString(w,y){const T=R.readUInt32BE(w,y);return y+=4,(0,F.decodeUTF16LE)(w,y,T)}writeSize(){return 4+4+S._writeStringSize(this.oldText)+S._writeStringSize(this.newText)}write(w,y){return R.writeUInt32BE(w,this.oldPosition,y),y+=4,R.writeUInt32BE(w,this.newPosition,y),y+=4,y=S._writeString(w,this.oldText,y),y=S._writeString(w,this.newText,y),y}static read(w,y,T){const _=R.readUInt32BE(w,y);y+=4;const N=R.readUInt32BE(w,y);y+=4;const b=S._readString(w,y);y+=S._writeStringSize(b);const c=S._readString(w,y);return y+=S._writeStringSize(c),T.push(new S(_,b,N,c)),y}}e.TextChange=S;function M(A,w){return A===null||A.length===0?w:new k(A,w).compress()}e.compressConsecutiveTextChanges=M;class k{constructor(w,y){this._prevEdits=w,this._currEdits=y,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let w=0,y=0,T=this._getPrev(w),_=this._getCurr(y);for(;w<this._prevLen||y<this._currLen;){if(T===null){this._acceptCurr(_),_=this._getCurr(++y);continue}if(_===null){this._acceptPrev(T),T=this._getPrev(++w);continue}if(_.oldEnd<=T.newPosition){this._acceptCurr(_),_=this._getCurr(++y);continue}if(T.newEnd<=_.oldPosition){this._acceptPrev(T),T=this._getPrev(++w);continue}if(_.oldPosition<T.newPosition){const[t,s]=k._splitCurr(_,T.newPosition-_.oldPosition);this._acceptCurr(t),_=s;continue}if(T.newPosition<_.oldPosition){const[t,s]=k._splitPrev(T,_.oldPosition-T.newPosition);this._acceptPrev(t),T=s;continue}let c,o;if(_.oldEnd===T.newEnd)c=T,o=_,T=this._getPrev(++w),_=this._getCurr(++y);else if(_.oldEnd<T.newEnd){const[t,s]=k._splitPrev(T,_.oldLength);c=t,o=_,T=s,_=this._getCurr(++y)}else{const[t,s]=k._splitCurr(_,T.newLength);c=T,o=t,T=this._getPrev(++w),_=s}this._result[this._resultLen++]=new S(c.oldPosition,c.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=c.newLength-c.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}const N=k._merge(this._result);return k._removeNoOps(N)}_acceptCurr(w){this._result[this._resultLen++]=k._rebaseCurr(this._prevDeltaOffset,w),this._currDeltaOffset+=w.newLength-w.oldLength}_getCurr(w){return w<this._currLen?this._currEdits[w]:null}_acceptPrev(w){this._result[this._resultLen++]=k._rebasePrev(this._currDeltaOffset,w),this._prevDeltaOffset+=w.newLength-w.oldLength}_getPrev(w){return w<this._prevLen?this._prevEdits[w]:null}static _rebaseCurr(w,y){return new S(y.oldPosition-w,y.oldText,y.newPosition,y.newText)}static _rebasePrev(w,y){return new S(y.oldPosition,y.oldText,y.newPosition+w,y.newText)}static _splitPrev(w,y){const T=w.newText.substr(0,y),_=w.newText.substr(y);return[new S(w.oldPosition,w.oldText,w.newPosition,T),new S(w.oldEnd,"",w.newPosition+y,_)]}static _splitCurr(w,y){const T=w.oldText.substr(0,y),_=w.oldText.substr(y);return[new S(w.oldPosition,T,w.newPosition,w.newText),new S(w.oldPosition+y,_,w.newEnd,"")]}static _merge(w){if(w.length===0)return w;const y=[];let T=0,_=w[0];for(let N=1;N<w.length;N++){const b=w[N];_.oldEnd===b.oldPosition?_=new S(_.oldPosition,_.oldText+b.oldText,_.newPosition,_.newText+b.newText):(y[T++]=_,_=b)}return y[T++]=_,y}static _removeNoOps(w){if(w.length===0)return w;const y=[];let T=0;for(let _=0;_<w.length;_++){const N=w[_];N.oldText!==N.newText&&(y[T++]=N)}return y}}}),define(ne[10],ie([0,1,33,11,25,15,34]),function(Z,e,R,F,B,S,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=e.LineStarts=e.createUintArray=e.AverageBufferSize=void 0,e.AverageBufferSize=65535;function k(o){let t;return o[o.length-1]<65536?t=new Uint16Array(o.length):t=new Uint32Array(o.length),t.set(o,0),t}e.createUintArray=k;class A{constructor(t,s,r,u,f){this.lineStarts=t,this.cr=s,this.lf=r,this.crlf=u,this.isBasicASCII=f}}e.LineStarts=A;function w(o,t=!0){const s=[0];let r=1;for(let u=0,f=o.length;u<f;u++){const m=o.charCodeAt(u);m===13?u+1<f&&o.charCodeAt(u+1)===10?(s[r++]=u+2,u++):s[r++]=u+1:m===10&&(s[r++]=u+1)}return t?k(s):s}e.createLineStartsFast=w;function y(o,t){o.length=0,o[0]=0;let s=1,r=0,u=0,f=0,m=!0;for(let L=0,D=t.length;L<D;L++){const a=t.charCodeAt(L);a===13?L+1<D&&t.charCodeAt(L+1)===10?(f++,o[s++]=L+2,L++):(r++,o[s++]=L+1):a===10?(u++,o[s++]=L+1):m&&a!==9&&(a<32||a>126)&&(m=!1)}const I=new A(k(o),r,u,f,m);return o.length=0,I}e.createLineStarts=y;class T{constructor(t,s,r,u,f){this.bufferIndex=t,this.start=s,this.end=r,this.lineFeedCnt=u,this.length=f}}e.Piece=T;class _{constructor(t,s){this.buffer=t,this.lineStarts=s}}e.StringBuffer=_;class N{constructor(t,s){this._pieces=[],this._tree=t,this._BOM=s,this._index=0,t.root!==S.SENTINEL&&t.iterate(t.root,r=>(r!==S.SENTINEL&&this._pieces.push(r.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class b{constructor(t){this._limit=t,this._cache=[]}get(t){for(let s=this._cache.length-1;s>=0;s--){const r=this._cache[s];if(r.nodeStartOffset<=t&&r.nodeStartOffset+r.node.piece.length>=t)return r}return null}get2(t){for(let s=this._cache.length-1;s>=0;s--){const r=this._cache[s];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<t&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=t)return r}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let s=!1;const r=this._cache;for(let u=0;u<r.length;u++){const f=r[u];if(f.node.parent===null||f.nodeStartOffset>=t){r[u]=null,s=!0;continue}}if(s){const u=[];for(const f of r)f!==null&&u.push(f);this._cache=u}}}class c{constructor(t,s,r){this.create(t,s,r)}create(t,s,r){this._buffers=[new _("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=S.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=s,this._EOLLength=s.length,this._EOLNormalized=r;let u=null;for(let f=0,m=t.length;f<m;f++)if(t[f].buffer.length>0){t[f].lineStarts||(t[f].lineStarts=w(t[f].buffer));const I=new T(f+1,{line:0,column:0},{line:t[f].lineStarts.length-1,column:t[f].buffer.length-t[f].lineStarts[t[f].lineStarts.length-1]},t[f].lineStarts.length-1,t[f].buffer.length);this._buffers.push(t[f]),u=this.rbInsertRight(u,I)}this._searchCache=new b(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const s=e.AverageBufferSize,r=s-Math.floor(s/3),u=r*2;let f="",m=0;const I=[];if(this.iterate(this.root,L=>{const D=this.getNodeContent(L),a=D.length;if(m<=r||m+a<u)return f+=D,m+=a,!0;const i=f.replace(/\r\n|\r|\n/g,t);return I.push(new _(i,w(i))),f=D,m=a,!0}),m>0){const L=f.replace(/\r\n|\r|\n/g,t);I.push(new _(L,w(L)))}this.create(I,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new N(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const s=0;return this.iterate(this.root,u=>{if(u===S.SENTINEL)return!0;const f=this.getNodeContent(u),m=f.length,I=t.nodeAt(s),L=t.nodeAt(s+m),D=t.getValueInRange2(I,L);return f===D})}getOffsetAt(t,s){let r=0,u=this.root;for(;u!==S.SENTINEL;)if(u.left!==S.SENTINEL&&u.lf_left+1>=t)u=u.left;else{if(u.lf_left+u.piece.lineFeedCnt+1>=t)return r+=u.size_left,r+=this.getAccumulatedValue(u,t-u.lf_left-2)+s-1;t-=u.lf_left+u.piece.lineFeedCnt,r+=u.size_left+u.piece.length,u=u.right}return r}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let s=this.root,r=0;const u=t;for(;s!==S.SENTINEL;)if(s.size_left!==0&&s.size_left>=t)s=s.left;else if(s.size_left+s.piece.length>=t){const f=this.getIndexOf(s,t-s.size_left);if(r+=s.lf_left+f.index,f.index===0){const m=this.getOffsetAt(r+1,1),I=u-m;return new R.Position(r+1,I+1)}return new R.Position(r+1,f.remainder+1)}else if(t-=s.size_left+s.piece.length,r+=s.lf_left+s.piece.lineFeedCnt,s.right===S.SENTINEL){const f=this.getOffsetAt(r+1,1),m=u-t-f;return new R.Position(r+1,m+1)}else s=s.right;return new R.Position(1,1)}getValueInRange(t,s){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const r=this.nodeAt2(t.startLineNumber,t.startColumn),u=this.nodeAt2(t.endLineNumber,t.endColumn),f=this.getValueInRange2(r,u);return s?s!==this._EOL||!this._EOLNormalized?f.replace(/\r\n|\r|\n/g,s):s===this.getEOL()&&this._EOLNormalized?f:f.replace(/\r\n|\r|\n/g,s):f}getValueInRange2(t,s){if(t.node===s.node){const I=t.node,L=this._buffers[I.piece.bufferIndex].buffer,D=this.offsetInBuffer(I.piece.bufferIndex,I.piece.start);return L.substring(D+t.remainder,D+s.remainder)}let r=t.node;const u=this._buffers[r.piece.bufferIndex].buffer,f=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);let m=u.substring(f+t.remainder,f+r.piece.length);for(r=r.next();r!==S.SENTINEL;){const I=this._buffers[r.piece.bufferIndex].buffer,L=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);if(r===s.node){m+=I.substring(L,L+s.remainder);break}else m+=I.substr(L,r.piece.length);r=r.next()}return m}getLinesContent(){const t=[];let s=0,r="",u=!1;return this.iterate(this.root,f=>{if(f===S.SENTINEL)return!0;const m=f.piece;let I=m.length;if(I===0)return!0;const L=this._buffers[m.bufferIndex].buffer,D=this._buffers[m.bufferIndex].lineStarts,a=m.start.line,i=m.end.line;let h=D[a]+m.start.column;if(u&&(L.charCodeAt(h)===10&&(h++,I--),t[s++]=r,r="",u=!1,I===0))return!0;if(a===i)return!this._EOLNormalized&&L.charCodeAt(h+I-1)===13?(u=!0,r+=L.substr(h,I-1)):r+=L.substr(h,I),!0;r+=this._EOLNormalized?L.substring(h,Math.max(h,D[a+1]-this._EOLLength)):L.substring(h,D[a+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=r;for(let l=a+1;l<i;l++)r=this._EOLNormalized?L.substring(D[l],D[l+1]-this._EOLLength):L.substring(D[l],D[l+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=r;return!this._EOLNormalized&&L.charCodeAt(D[i]+m.end.column-1)===13?(u=!0,m.end.column===0?s--:r=L.substr(D[i],m.end.column-1)):r=L.substr(D[i],m.end.column),!0}),u&&(t[s++]=r,r=""),t[s++]=r,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const s=t.node.next();if(!s)return 0;const r=this._buffers[s.piece.bufferIndex],u=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return r.buffer.charCodeAt(u)}else{const s=this._buffers[t.node.piece.bufferIndex],u=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return s.buffer.charCodeAt(u)}}getLineCharCode(t,s){const r=this.nodeAt2(t,s+1);return this._getCharCode(r)}getLineLength(t){if(t===this.getLineCount()){const s=this.getOffsetAt(t,1);return this.getLength()-s}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const s=this.nodeAt(t);return this._getCharCode(s)}findMatchesInNode(t,s,r,u,f,m,I,L,D,a,i){const h=this._buffers[t.piece.bufferIndex],l=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),g=this.offsetInBuffer(t.piece.bufferIndex,f),v=this.offsetInBuffer(t.piece.bufferIndex,m);let q;const z={line:0,column:0};let P,n;s._wordSeparators?(P=h.buffer.substring(g,v),n=p=>p+g,s.reset(0)):(P=h.buffer,n=p=>p,s.reset(g));do if(q=s.next(P),q){if(n(q.index)>=v)return a;this.positionInBuffer(t,n(q.index)-l,z);const p=this.getLineFeedCnt(t.piece.bufferIndex,f,z),C=z.line===f.line?z.column-f.column+u:z.column+1,j=C+q[0].length;if(i[a++]=(0,M.createFindMatch)(new F.Range(r+p,C,r+p,j),q,L),n(q.index)+q[0].length>=v||a>=D)return a}while(q);return a}findMatchesLineByLine(t,s,r,u){const f=[];let m=0;const I=new M.Searcher(s.wordSeparators,s.regex);let L=this.nodeAt2(t.startLineNumber,t.startColumn);if(L===null)return[];const D=this.nodeAt2(t.endLineNumber,t.endColumn);if(D===null)return[];let a=this.positionInBuffer(L.node,L.remainder);const i=this.positionInBuffer(D.node,D.remainder);if(L.node===D.node)return this.findMatchesInNode(L.node,I,t.startLineNumber,t.startColumn,a,i,s,r,u,m,f),f;let h=t.startLineNumber,l=L.node;for(;l!==D.node;){const v=this.getLineFeedCnt(l.piece.bufferIndex,a,l.piece.end);if(v>=1){const z=this._buffers[l.piece.bufferIndex].lineStarts,P=this.offsetInBuffer(l.piece.bufferIndex,l.piece.start),n=z[a.line+v],p=h===t.startLineNumber?t.startColumn:1;if(m=this.findMatchesInNode(l,I,h,p,a,this.positionInBuffer(l,n-P),s,r,u,m,f),m>=u)return f;h+=v}const q=h===t.startLineNumber?t.startColumn-1:0;if(h===t.endLineNumber){const z=this.getLineContent(h).substring(q,t.endColumn-1);return m=this._findMatchesInLine(s,I,z,t.endLineNumber,q,m,f,r,u),f}if(m=this._findMatchesInLine(s,I,this.getLineContent(h).substr(q),h,q,m,f,r,u),m>=u)return f;h++,L=this.nodeAt2(h,1),l=L.node,a=this.positionInBuffer(L.node,L.remainder)}if(h===t.endLineNumber){const v=h===t.startLineNumber?t.startColumn-1:0,q=this.getLineContent(h).substring(v,t.endColumn-1);return m=this._findMatchesInLine(s,I,q,t.endLineNumber,v,m,f,r,u),f}const g=h===t.startLineNumber?t.startColumn:1;return m=this.findMatchesInNode(D.node,I,h,g,a,i,s,r,u,m,f),f}_findMatchesInLine(t,s,r,u,f,m,I,L,D){const a=t.wordSeparators;if(!L&&t.simpleSearch){const h=t.simpleSearch,l=h.length,g=r.length;let v=-l;for(;(v=r.indexOf(h,v+l))!==-1;)if((!a||(0,M.isValidMatch)(a,r,g,v,l))&&(I[m++]=new B.FindMatch(new F.Range(u,v+1+f,u,v+1+l+f),null),m>=D))return m;return m}let i;s.reset(0);do if(i=s.next(r),i&&(I[m++]=(0,M.createFindMatch)(new F.Range(u,i.index+1+f,u,i.index+1+i[0].length+f),i,L),m>=D))return m;while(i);return m}insert(t,s,r=!1){if(this._EOLNormalized=this._EOLNormalized&&r,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==S.SENTINEL){const{node:u,remainder:f,nodeStartOffset:m}=this.nodeAt(t),I=u.piece,L=I.bufferIndex,D=this.positionInBuffer(u,f);if(u.piece.bufferIndex===0&&I.end.line===this._lastChangeBufferPos.line&&I.end.column===this._lastChangeBufferPos.column&&m+I.length===t&&s.length<e.AverageBufferSize){this.appendToNode(u,s),this.computeBufferMetadata();return}if(m===t)this.insertContentToNodeLeft(s,u),this._searchCache.validate(t);else if(m+u.piece.length>t){const a=[];let i=new T(I.bufferIndex,D,I.end,this.getLineFeedCnt(I.bufferIndex,D,I.end),this.offsetInBuffer(L,I.end)-this.offsetInBuffer(L,D));if(this.shouldCheckCRLF()&&this.endWithCR(s)&&this.nodeCharCodeAt(u,f)===10){const v={line:i.start.line+1,column:0};i=new T(i.bufferIndex,v,i.end,this.getLineFeedCnt(i.bufferIndex,v,i.end),i.length-1),s+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(s))if(this.nodeCharCodeAt(u,f-1)===13){const v=this.positionInBuffer(u,f-1);this.deleteNodeTail(u,v),s="\r"+s,u.piece.length===0&&a.push(u)}else this.deleteNodeTail(u,D);else this.deleteNodeTail(u,D);const h=this.createNewPieces(s);i.length>0&&this.rbInsertRight(u,i);let l=u;for(let g=0;g<h.length;g++)l=this.rbInsertRight(l,h[g]);this.deleteNodes(a)}else this.insertContentToNodeRight(s,u)}else{const u=this.createNewPieces(s);let f=this.rbInsertLeft(null,u[0]);for(let m=1;m<u.length;m++)f=this.rbInsertRight(f,u[m])}this.computeBufferMetadata()}delete(t,s){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",s<=0||this.root===S.SENTINEL)return;const r=this.nodeAt(t),u=this.nodeAt(t+s),f=r.node,m=u.node;if(f===m){const h=this.positionInBuffer(f,r.remainder),l=this.positionInBuffer(f,u.remainder);if(r.nodeStartOffset===t){if(s===f.piece.length){const g=f.next();(0,S.rbDelete)(this,f),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(f,l),this._searchCache.validate(t),this.validateCRLFWithPrevNode(f),this.computeBufferMetadata();return}if(r.nodeStartOffset+f.piece.length===t+s){this.deleteNodeTail(f,h),this.validateCRLFWithNextNode(f),this.computeBufferMetadata();return}this.shrinkNode(f,h,l),this.computeBufferMetadata();return}const I=[],L=this.positionInBuffer(f,r.remainder);this.deleteNodeTail(f,L),this._searchCache.validate(t),f.piece.length===0&&I.push(f);const D=this.positionInBuffer(m,u.remainder);this.deleteNodeHead(m,D),m.piece.length===0&&I.push(m);const a=f.next();for(let h=a;h!==S.SENTINEL&&h!==m;h=h.next())I.push(h);const i=f.piece.length===0?f.prev():f;this.deleteNodes(I),this.validateCRLFWithNextNode(i),this.computeBufferMetadata()}insertContentToNodeLeft(t,s){const r=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(s)){const m=s.piece,I={line:m.start.line+1,column:0},L=new T(m.bufferIndex,I,m.end,this.getLineFeedCnt(m.bufferIndex,I,m.end),m.length-1);s.piece=L,t+=`
`,(0,S.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&r.push(s)}const u=this.createNewPieces(t);let f=this.rbInsertLeft(s,u[u.length-1]);for(let m=u.length-2;m>=0;m--)f=this.rbInsertLeft(f,u[m]);this.validateCRLFWithPrevNode(f),this.deleteNodes(r)}insertContentToNodeRight(t,s){this.adjustCarriageReturnFromNext(t,s)&&(t+=`
`);const r=this.createNewPieces(t),u=this.rbInsertRight(s,r[0]);let f=u;for(let m=1;m<r.length;m++)f=this.rbInsertRight(f,r[m]);this.validateCRLFWithPrevNode(u)}positionInBuffer(t,s,r){const u=t.piece,f=t.piece.bufferIndex,m=this._buffers[f].lineStarts,L=m[u.start.line]+u.start.column+s;let D=u.start.line,a=u.end.line,i=0,h=0,l=0;for(;D<=a&&(i=D+(a-D)/2|0,l=m[i],i!==a);)if(h=m[i+1],L<l)a=i-1;else if(L>=h)D=i+1;else break;return r?(r.line=i,r.column=L-l,null):{line:i,column:L-l}}getLineFeedCnt(t,s,r){if(r.column===0)return r.line-s.line;const u=this._buffers[t].lineStarts;if(r.line===u.length-1)return r.line-s.line;const f=u[r.line+1],m=u[r.line]+r.column;if(f>m+1)return r.line-s.line;const I=m-1;return this._buffers[t].buffer.charCodeAt(I)===13?r.line-s.line+1:r.line-s.line}offsetInBuffer(t,s){return this._buffers[t].lineStarts[s.line]+s.column}deleteNodes(t){for(let s=0;s<t.length;s++)(0,S.rbDelete)(this,t[s])}createNewPieces(t){if(t.length>e.AverageBufferSize){const a=[];for(;t.length>e.AverageBufferSize;){const h=t.charCodeAt(e.AverageBufferSize-1);let l;h===13||h>=55296&&h<=56319?(l=t.substring(0,e.AverageBufferSize-1),t=t.substring(e.AverageBufferSize-1)):(l=t.substring(0,e.AverageBufferSize),t=t.substring(e.AverageBufferSize));const g=w(l);a.push(new T(this._buffers.length,{line:0,column:0},{line:g.length-1,column:l.length-g[g.length-1]},g.length-1,l.length)),this._buffers.push(new _(l,g))}const i=w(t);return a.push(new T(this._buffers.length,{line:0,column:0},{line:i.length-1,column:t.length-i[i.length-1]},i.length-1,t.length)),this._buffers.push(new _(t,i)),a}let s=this._buffers[0].buffer.length;const r=w(t,!1);let u=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},u=this._lastChangeBufferPos;for(let a=0;a<r.length;a++)r[a]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+="_"+t,s+=1}else{if(s!==0)for(let a=0;a<r.length;a++)r[a]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+=t}const f=this._buffers[0].buffer.length,m=this._buffers[0].lineStarts.length-1,I=f-this._buffers[0].lineStarts[m],L={line:m,column:I},D=new T(0,u,L,this.getLineFeedCnt(0,u,L),f-s);return this._lastChangeBufferPos=L,[D]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,s=0){let r=this.root,u="";const f=this._searchCache.get2(t);if(f){r=f.node;const m=this.getAccumulatedValue(r,t-f.nodeStartLineNumber-1),I=this._buffers[r.piece.bufferIndex].buffer,L=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);if(f.nodeStartLineNumber+r.piece.lineFeedCnt===t)u=I.substring(L+m,L+r.piece.length);else{const D=this.getAccumulatedValue(r,t-f.nodeStartLineNumber);return I.substring(L+m,L+D-s)}}else{let m=0;const I=t;for(;r!==S.SENTINEL;)if(r.left!==S.SENTINEL&&r.lf_left>=t-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>t-1){const L=this.getAccumulatedValue(r,t-r.lf_left-2),D=this.getAccumulatedValue(r,t-r.lf_left-1),a=this._buffers[r.piece.bufferIndex].buffer,i=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return m+=r.size_left,this._searchCache.set({node:r,nodeStartOffset:m,nodeStartLineNumber:I-(t-1-r.lf_left)}),a.substring(i+L,i+D-s)}else if(r.lf_left+r.piece.lineFeedCnt===t-1){const L=this.getAccumulatedValue(r,t-r.lf_left-2),D=this._buffers[r.piece.bufferIndex].buffer,a=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);u=D.substring(a+L,a+r.piece.length);break}else t-=r.lf_left+r.piece.lineFeedCnt,m+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==S.SENTINEL;){const m=this._buffers[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const I=this.getAccumulatedValue(r,0),L=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return u+=m.substring(L,L+I-s),u}else{const I=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);u+=m.substr(I,r.piece.length)}r=r.next()}return u}computeBufferMetadata(){let t=this.root,s=1,r=0;for(;t!==S.SENTINEL;)s+=t.lf_left+t.piece.lineFeedCnt,r+=t.size_left+t.piece.length,t=t.right;this._lineCnt=s,this._length=r,this._searchCache.validate(this._length)}getIndexOf(t,s){const r=t.piece,u=this.positionInBuffer(t,s),f=u.line-r.start.line;if(this.offsetInBuffer(r.bufferIndex,r.end)-this.offsetInBuffer(r.bufferIndex,r.start)===s){const m=this.getLineFeedCnt(t.piece.bufferIndex,r.start,u);if(m!==f)return{index:m,remainder:0}}return{index:f,remainder:u.column}}getAccumulatedValue(t,s){if(s<0)return 0;const r=t.piece,u=this._buffers[r.bufferIndex].lineStarts,f=r.start.line+s+1;return f>r.end.line?u[r.end.line]+r.end.column-u[r.start.line]-r.start.column:u[f]-u[r.start.line]-r.start.column}deleteNodeTail(t,s){const r=t.piece,u=r.lineFeedCnt,f=this.offsetInBuffer(r.bufferIndex,r.end),m=s,I=this.offsetInBuffer(r.bufferIndex,m),L=this.getLineFeedCnt(r.bufferIndex,r.start,m),D=L-u,a=I-f,i=r.length+a;t.piece=new T(r.bufferIndex,r.start,m,L,i),(0,S.updateTreeMetadata)(this,t,a,D)}deleteNodeHead(t,s){const r=t.piece,u=r.lineFeedCnt,f=this.offsetInBuffer(r.bufferIndex,r.start),m=s,I=this.getLineFeedCnt(r.bufferIndex,m,r.end),L=this.offsetInBuffer(r.bufferIndex,m),D=I-u,a=f-L,i=r.length+a;t.piece=new T(r.bufferIndex,m,r.end,I,i),(0,S.updateTreeMetadata)(this,t,a,D)}shrinkNode(t,s,r){const u=t.piece,f=u.start,m=u.end,I=u.length,L=u.lineFeedCnt,D=s,a=this.getLineFeedCnt(u.bufferIndex,u.start,D),i=this.offsetInBuffer(u.bufferIndex,s)-this.offsetInBuffer(u.bufferIndex,f);t.piece=new T(u.bufferIndex,u.start,D,a,i),(0,S.updateTreeMetadata)(this,t,i-I,a-L);const h=new T(u.bufferIndex,r,m,this.getLineFeedCnt(u.bufferIndex,r,m),this.offsetInBuffer(u.bufferIndex,m)-this.offsetInBuffer(u.bufferIndex,r)),l=this.rbInsertRight(t,h);this.validateCRLFWithPrevNode(l)}appendToNode(t,s){this.adjustCarriageReturnFromNext(s,t)&&(s+=`
`);const r=this.shouldCheckCRLF()&&this.startWithLF(s)&&this.endWithCR(t),u=this._buffers[0].buffer.length;this._buffers[0].buffer+=s;const f=w(s,!1);for(let l=0;l<f.length;l++)f[l]+=u;if(r){const l=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:u-l}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(f.slice(1));const m=this._buffers[0].lineStarts.length-1,I=this._buffers[0].buffer.length-this._buffers[0].lineStarts[m],L={line:m,column:I},D=t.piece.length+s.length,a=t.piece.lineFeedCnt,i=this.getLineFeedCnt(0,t.piece.start,L),h=i-a;t.piece=new T(t.piece.bufferIndex,t.piece.start,L,i,D),this._lastChangeBufferPos=L,(0,S.updateTreeMetadata)(this,t,s.length,h)}nodeAt(t){let s=this.root;const r=this._searchCache.get(t);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:t-r.nodeStartOffset};let u=0;for(;s!==S.SENTINEL;)if(s.size_left>t)s=s.left;else if(s.size_left+s.piece.length>=t){u+=s.size_left;const f={node:s,remainder:t-s.size_left,nodeStartOffset:u};return this._searchCache.set(f),f}else t-=s.size_left+s.piece.length,u+=s.size_left+s.piece.length,s=s.right;return null}nodeAt2(t,s){let r=this.root,u=0;for(;r!==S.SENTINEL;)if(r.left!==S.SENTINEL&&r.lf_left>=t-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>t-1){const f=this.getAccumulatedValue(r,t-r.lf_left-2),m=this.getAccumulatedValue(r,t-r.lf_left-1);return u+=r.size_left,{node:r,remainder:Math.min(f+s-1,m),nodeStartOffset:u}}else if(r.lf_left+r.piece.lineFeedCnt===t-1){const f=this.getAccumulatedValue(r,t-r.lf_left-2);if(f+s-1<=r.piece.length)return{node:r,remainder:f+s-1,nodeStartOffset:u};s-=r.piece.length-f;break}else t-=r.lf_left+r.piece.lineFeedCnt,u+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==S.SENTINEL;){if(r.piece.lineFeedCnt>0){const f=this.getAccumulatedValue(r,0),m=this.offsetOfNode(r);return{node:r,remainder:Math.min(s-1,f),nodeStartOffset:m}}else if(r.piece.length>=s-1){const f=this.offsetOfNode(r);return{node:r,remainder:s-1,nodeStartOffset:f}}else s-=r.piece.length;r=r.next()}return null}nodeCharCodeAt(t,s){if(t.piece.lineFeedCnt<1)return-1;const r=this._buffers[t.piece.bufferIndex],u=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+s;return r.buffer.charCodeAt(u)}offsetOfNode(t){if(!t)return 0;let s=t.size_left;for(;t!==this.root;)t.parent.right===t&&(s+=t.parent.size_left+t.parent.piece.length),t=t.parent;return s}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===S.SENTINEL||t.piece.lineFeedCnt===0)return!1;const s=t.piece,r=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,f=r[u]+s.start.column;return u===r.length-1||r[u+1]>f+1?!1:this._buffers[s.bufferIndex].buffer.charCodeAt(f)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===S.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const s=t.prev();this.endWithCR(s)&&this.fixCRLF(s,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const s=t.next();this.startWithLF(s)&&this.fixCRLF(t,s)}}fixCRLF(t,s){const r=[],u=this._buffers[t.piece.bufferIndex].lineStarts;let f;t.piece.end.column===0?f={line:t.piece.end.line-1,column:u[t.piece.end.line]-u[t.piece.end.line-1]-1}:f={line:t.piece.end.line,column:t.piece.end.column-1};const m=t.piece.length-1,I=t.piece.lineFeedCnt-1;t.piece=new T(t.piece.bufferIndex,t.piece.start,f,I,m),(0,S.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&r.push(t);const L={line:s.piece.start.line+1,column:0},D=s.piece.length-1,a=this.getLineFeedCnt(s.piece.bufferIndex,L,s.piece.end);s.piece=new T(s.piece.bufferIndex,L,s.piece.end,a,D),(0,S.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&r.push(s);const i=this.createNewPieces(`\r
`);this.rbInsertRight(t,i[0]);for(let h=0;h<r.length;h++)(0,S.rbDelete)(this,r[h])}adjustCarriageReturnFromNext(t,s){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const r=s.next();if(this.startWithLF(r)){if(t+=`
`,r.piece.length===1)(0,S.rbDelete)(this,r);else{const u=r.piece,f={line:u.start.line+1,column:0},m=u.length-1,I=this.getLineFeedCnt(u.bufferIndex,f,u.end);r.piece=new T(u.bufferIndex,f,u.end,I,m),(0,S.updateTreeMetadata)(this,r,-1,-1)}return!0}}return!1}iterate(t,s){if(t===S.SENTINEL)return s(S.SENTINEL);const r=this.iterate(t.left,s);return r&&s(t)&&this.iterate(t.right,s)}getNodeContent(t){if(t===S.SENTINEL)return"";const s=this._buffers[t.piece.bufferIndex],r=t.piece,u=this.offsetInBuffer(r.bufferIndex,r.start),f=this.offsetInBuffer(r.bufferIndex,r.end);return s.buffer.substring(u,f)}getPieceContent(t){const s=this._buffers[t.bufferIndex],r=this.offsetInBuffer(t.bufferIndex,t.start),u=this.offsetInBuffer(t.bufferIndex,t.end);return s.buffer.substring(r,u)}rbInsertRight(t,s){const r=new S.TreeNode(s,1);if(r.left=S.SENTINEL,r.right=S.SENTINEL,r.parent=S.SENTINEL,r.size_left=0,r.lf_left=0,this.root===S.SENTINEL)this.root=r,r.color=0;else if(t.right===S.SENTINEL)t.right=r,r.parent=t;else{const f=(0,S.leftest)(t.right);f.left=r,r.parent=f}return(0,S.fixInsert)(this,r),r}rbInsertLeft(t,s){const r=new S.TreeNode(s,1);if(r.left=S.SENTINEL,r.right=S.SENTINEL,r.parent=S.SENTINEL,r.size_left=0,r.lf_left=0,this.root===S.SENTINEL)this.root=r,r.color=0;else if(t.left===S.SENTINEL)t.left=r,r.parent=t;else{const u=(0,S.righttest)(t.left);u.right=r,r.parent=u}return(0,S.fixInsert)(this,r),r}getContentOfSubTree(t){let s="";return this.iterate(t,r=>(s+=this.getNodeContent(r),!0)),s}}e.PieceTreeBase=c}),define(ne[26],ie([0,1,21,3,11,25,10,14,24,5]),function(Z,e,R,F,B,S,M,k,A,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class y extends w.Disposable{constructor(_,N,b,c,o,t,s){super();this._onDidChangeContent=this._register(new R.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=N,this._mightContainNonBasicASCII=!t,this._mightContainRTL=c,this._mightContainUnusualLineTerminators=o,this._pieceTree=new M.PieceTreeBase(_,b,s)}equals(_){return!(_ instanceof y)||this._BOM!==_._BOM||this.getEOL()!==_.getEOL()?!1:this._pieceTree.equal(_._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(_){return this._pieceTree.createSnapshot(_?this._BOM:"")}getOffsetAt(_,N){return this._pieceTree.getOffsetAt(_,N)}getPositionAt(_){return this._pieceTree.getPositionAt(_)}getRangeAt(_,N){const b=_+N,c=this.getPositionAt(_),o=this.getPositionAt(b);return new B.Range(c.lineNumber,c.column,o.lineNumber,o.column)}getValueInRange(_,N=0){if(_.isEmpty())return"";const b=this._getEndOfLine(N);return this._pieceTree.getValueInRange(_,b)}getValueLengthInRange(_,N=0){if(_.isEmpty())return 0;if(_.startLineNumber===_.endLineNumber)return _.endColumn-_.startColumn;const b=this.getOffsetAt(_.startLineNumber,_.startColumn);return this.getOffsetAt(_.endLineNumber,_.endColumn)-b}getCharacterCountInRange(_,N=0){if(this._mightContainNonBasicASCII){let b=0;const c=_.startLineNumber,o=_.endLineNumber;for(let t=c;t<=o;t++){const s=this.getLineContent(t),r=t===c?_.startColumn-1:0,u=t===o?_.endColumn-1:s.length;for(let f=r;f<u;f++)F.isHighSurrogate(s.charCodeAt(f))?(b=b+1,f=f+1):b=b+1}return b+=this._getEndOfLine(N).length*(o-c),b}return this.getValueLengthInRange(_,N)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(_){return this._pieceTree.getLineContent(_)}getLineCharCode(_,N){return this._pieceTree.getLineCharCode(_,N)}getCharCode(_){return this._pieceTree.getCharCode(_)}getLineLength(_){return this._pieceTree.getLineLength(_)}getLineMinColumn(_){return 1}getLineMaxColumn(_){return this.getLineLength(_)+1}getLineFirstNonWhitespaceColumn(_){const N=F.firstNonWhitespaceIndex(this.getLineContent(_));return N===-1?0:N+1}getLineLastNonWhitespaceColumn(_){const N=F.lastNonWhitespaceIndex(this.getLineContent(_));return N===-1?0:N+2}_getEndOfLine(_){switch(_){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(_){this._pieceTree.setEOL(_)}applyEdits(_,N,b){let c=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,t=this._mightContainNonBasicASCII,s=!0,r=[];for(let a=0;a<_.length;a++){const i=_[a];s&&i._isTracked&&(s=!1);const h=i.range;if(i.text){let z=!0;t||(z=!F.isBasicASCII(i.text),t=z),!c&&z&&(c=F.containsRTL(i.text)),!o&&z&&(o=F.containsUnusualLineTerminators(i.text))}let l="",g=0,v=0,q=0;if(i.text){let z;[g,v,q,z]=(0,k.countEOL)(i.text);const P=this.getEOL();z===0||z===(P===`\r
`?2:1)?l=i.text:l=i.text.replace(/\r\n|\r|\n/g,P)}r[a]={sortIndex:a,identifier:i.identifier||null,range:h,rangeOffset:this.getOffsetAt(h.startLineNumber,h.startColumn),rangeLength:this.getValueLengthInRange(h),text:l,eolCount:g,firstLineLength:v,lastLineLength:q,forceMoveMarkers:Boolean(i.forceMoveMarkers),isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}r.sort(y._sortOpsAscending);let u=!1;for(let a=0,i=r.length-1;a<i;a++){const h=r[a].range.getEndPosition(),l=r[a+1].range.getStartPosition();if(l.isBeforeOrEqual(h)){if(l.isBefore(h))throw new Error("Overlapping ranges are not allowed!");u=!0}}s&&(r=this._reduceOperations(r));const f=b||N?y._getInverseEditRanges(r):[],m=[];if(N)for(let a=0;a<r.length;a++){const i=r[a],h=f[a];if(i.isAutoWhitespaceEdit&&i.range.isEmpty())for(let l=h.startLineNumber;l<=h.endLineNumber;l++){let g="";l===h.startLineNumber&&(g=this.getLineContent(i.range.startLineNumber),F.firstNonWhitespaceIndex(g)!==-1)||m.push({lineNumber:l,oldContent:g})}}let I=null;if(b){let a=0;I=[];for(let i=0;i<r.length;i++){const h=r[i],l=f[i],g=this.getValueInRange(h.range),v=h.rangeOffset+a;a+=h.text.length-g.length,I[i]={sortIndex:h.sortIndex,identifier:h.identifier,range:l,text:g,textChange:new A.TextChange(h.rangeOffset,g,v,h.text)}}u||I.sort((i,h)=>i.sortIndex-h.sortIndex)}this._mightContainRTL=c,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=t;const L=this._doApplyEdits(r);let D=null;if(N&&m.length>0){m.sort((a,i)=>i.lineNumber-a.lineNumber),D=[];for(let a=0,i=m.length;a<i;a++){const h=m[a].lineNumber;if(a>0&&m[a-1].lineNumber===h)continue;const l=m[a].oldContent,g=this.getLineContent(h);g.length===0||g===l||F.firstNonWhitespaceIndex(g)!==-1||D.push(h)}}return this._onDidChangeContent.fire(),new S.ApplyEditsResult(I,L,D)}_reduceOperations(_){return _.length<1e3?_:[this._toSingleEditOperation(_)]}_toSingleEditOperation(_){let N=!1;const b=_[0].range,c=_[_.length-1].range,o=new B.Range(b.startLineNumber,b.startColumn,c.endLineNumber,c.endColumn);let t=b.startLineNumber,s=b.startColumn;const r=[];for(let L=0,D=_.length;L<D;L++){const a=_[L],i=a.range;N=N||a.forceMoveMarkers,r.push(this.getValueInRange(new B.Range(t,s,i.startLineNumber,i.startColumn))),a.text.length>0&&r.push(a.text),t=i.endLineNumber,s=i.endColumn}const u=r.join(""),[f,m,I]=(0,k.countEOL)(u);return{sortIndex:0,identifier:_[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:u,eolCount:f,firstLineLength:m,lastLineLength:I,forceMoveMarkers:N,isAutoWhitespaceEdit:!1}}_doApplyEdits(_){_.sort(y._sortOpsDescending);const N=[];for(let b=0;b<_.length;b++){const c=_[b],o=c.range.startLineNumber,t=c.range.startColumn,s=c.range.endLineNumber,r=c.range.endColumn;if(o===s&&t===r&&c.text.length===0)continue;c.text?(this._pieceTree.delete(c.rangeOffset,c.rangeLength),this._pieceTree.insert(c.rangeOffset,c.text,!0)):this._pieceTree.delete(c.rangeOffset,c.rangeLength);const u=new B.Range(o,t,s,r);N.push({range:u,rangeLength:c.rangeLength,text:c.text,rangeOffset:c.rangeOffset,forceMoveMarkers:c.forceMoveMarkers})}return N}findMatchesLineByLine(_,N,b,c){return this._pieceTree.findMatchesLineByLine(_,N,b,c)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(_,N){const b=_.startLineNumber,c=_.startColumn,[o,t,s]=(0,k.countEOL)(N);let r;if(N.length>0){const u=o+1;u===1?r=new B.Range(b,c,b,c+t):r=new B.Range(b,c,b+u-1,s+1)}else r=new B.Range(b,c,b,c);return r}static _getInverseEditRanges(_){const N=[];let b=0,c=0,o=null;for(let t=0,s=_.length;t<s;t++){const r=_[t];let u,f;o?o.range.endLineNumber===r.range.startLineNumber?(u=b,f=c+(r.range.startColumn-o.range.endColumn)):(u=b+(r.range.startLineNumber-o.range.endLineNumber),f=r.range.startColumn):(u=r.range.startLineNumber,f=r.range.startColumn);let m;if(r.text.length>0){const I=r.eolCount+1;I===1?m=new B.Range(u,f,u,f+r.firstLineLength):m=new B.Range(u,f,u+I-1,r.lastLineLength+1)}else m=new B.Range(u,f,u,f);b=m.endLineNumber,c=m.endColumn,N.push(m),o=r}return N}static _sortOpsAscending(_,N){const b=B.Range.compareRangesUsingEnds(_.range,N.range);return b===0?_.sortIndex-N.sortIndex:b}static _sortOpsDescending(_,N){const b=B.Range.compareRangesUsingEnds(_.range,N.range);return b===0?N.sortIndex-_.sortIndex:-b}}e.PieceTreeTextBuffer=y}),define(ne[27],ie([0,1,3,10,26]),function(Z,e,R,F,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=e.PieceTreeTextBufferFactory=void 0;class S{constructor(A,w,y,T,_,N,b,c,o){this._chunks=A,this._bom=w,this._cr=y,this._lf=T,this._crlf=_,this._containsRTL=N,this._containsUnusualLineTerminators=b,this._isBasicASCII=c,this._normalizeEOL=o}_getEOL(A){const w=this._cr+this._lf+this._crlf,y=this._cr+this._crlf;return w===0?A===1?`
`:`\r
`:y>w/2?`\r
`:`
`}create(A){const w=this._getEOL(A),y=this._chunks;if(this._normalizeEOL&&(w===`\r
`&&(this._cr>0||this._lf>0)||w===`
`&&(this._cr>0||this._crlf>0)))for(let _=0,N=y.length;_<N;_++){const b=y[_].buffer.replace(/\r\n|\r|\n/g,w),c=(0,F.createLineStartsFast)(b);y[_]=new F.StringBuffer(b,c)}const T=new B.PieceTreeTextBuffer(y,this._bom,w,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:T,disposable:T}}getFirstLineText(A){return this._chunks[0].buffer.substr(0,A).split(/\r\n|\r|\n/)[0]}}e.PieceTreeTextBufferFactory=S;class M{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(A){if(A.length===0)return;this.chunks.length===0&&R.startsWithUTF8BOM(A)&&(this.BOM=R.UTF8_BOM_CHARACTER,A=A.substr(1));const w=A.charCodeAt(A.length-1);w===13||w>=55296&&w<=56319?(this._acceptChunk1(A.substr(0,A.length-1),!1),this._hasPreviousChar=!0,this._previousChar=w):(this._acceptChunk1(A,!1),this._hasPreviousChar=!1,this._previousChar=w)}_acceptChunk1(A,w){!w&&A.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+A):this._acceptChunk2(A))}_acceptChunk2(A){const w=(0,F.createLineStarts)(this._tmpLineStarts,A);this.chunks.push(new F.StringBuffer(A,w.lineStarts)),this.cr+=w.cr,this.lf+=w.lf,this.crlf+=w.crlf,this.isBasicASCII&&(this.isBasicASCII=w.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=R.containsRTL(A)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=R.containsUnusualLineTerminators(A))}finish(A=!0){return this._finish(),new S(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,A)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const A=this.chunks[this.chunks.length-1];A.buffer+=String.fromCharCode(this._previousChar);const w=(0,F.createLineStartsFast)(A.buffer);A.lineStarts=w,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=M}),define(ne[28],ie([0,1]),function(Z,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var R;(function(M){M.serviceIds=new Map,M.DI_TARGET="$di$target",M.DI_DEPENDENCIES="$di$dependencies";function k(A){return A[M.DI_DEPENDENCIES]||[]}M.getServiceDependencies=k})(R=e._util||(e._util={})),e.IInstantiationService=B("instantiationService");function F(M,k,A){k[R.DI_TARGET]===k?k[R.DI_DEPENDENCIES].push({id:M,index:A}):(k[R.DI_DEPENDENCIES]=[{id:M,index:A}],k[R.DI_TARGET]=k)}function B(M){if(R.serviceIds.has(M))return R.serviceIds.get(M);const k=function(A,w,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");F(k,A,y)};return k.toString=()=>M,R.serviceIds.set(M,k),k}e.createDecorator=B;function S(M){return M}e.refineServiceDecorator=S}),define(ne[29],ie([0,1,2,3,28]),function(Z,e,R,F,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const S=new Map;S.set("false",!1),S.set("true",!0),S.set("isMac",R.isMacintosh),S.set("isLinux",R.isLinux),S.set("isWindows",R.isWindows),S.set("isWeb",R.isWeb),S.set("isMacNative",R.isMacintosh&&!R.isWeb),S.set("isEdge",R.isEdge),S.set("isFirefox",R.isFirefox),S.set("isChrome",R.isChrome),S.set("isSafari",R.isSafari);const M=Object.prototype.hasOwnProperty;var k;(function(P){P[P.False=0]="False",P[P.True=1]="True",P[P.Defined=2]="Defined",P[P.Not=3]="Not",P[P.Equals=4]="Equals",P[P.NotEquals=5]="NotEquals",P[P.And=6]="And",P[P.Regex=7]="Regex",P[P.NotRegex=8]="NotRegex",P[P.Or=9]="Or",P[P.In=10]="In",P[P.NotIn=11]="NotIn",P[P.Greater=12]="Greater",P[P.GreaterEquals=13]="GreaterEquals",P[P.Smaller=14]="Smaller",P[P.SmallerEquals=15]="SmallerEquals"})(k=e.ContextKeyExprType||(e.ContextKeyExprType={}));class A{static false(){return T.INSTANCE}static true(){return _.INSTANCE}static has(n){return N.create(n)}static equals(n,p){return b.create(n,p)}static notEquals(n,p){return t.create(n,p)}static regex(n,p){return L.create(n,p)}static in(n,p){return c.create(n,p)}static not(n){return s.create(n)}static and(...n){return i.create(n,null)}static or(...n){return h.create(n,null,!0)}static greater(n,p){return u.create(n,p)}static greaterEquals(n,p){return f.create(n,p)}static smaller(n,p){return m.create(n,p)}static smallerEquals(n,p){return I.create(n,p)}static deserialize(n,p=!1){if(!!n)return this._deserializeOrExpression(n,p)}static _deserializeOrExpression(n,p){const C=n.split("||");return h.create(C.map(j=>this._deserializeAndExpression(j,p)),null,!0)}static _deserializeAndExpression(n,p){const C=n.split("&&");return i.create(C.map(j=>this._deserializeOne(j,p)),null)}static _deserializeOne(n,p){if(n=n.trim(),n.indexOf("!=")>=0){const C=n.split("!=");return t.create(C[0].trim(),this._deserializeValue(C[1],p))}if(n.indexOf("==")>=0){const C=n.split("==");return b.create(C[0].trim(),this._deserializeValue(C[1],p))}if(n.indexOf("=~")>=0){const C=n.split("=~");return L.create(C[0].trim(),this._deserializeRegexValue(C[1],p))}if(n.indexOf(" in ")>=0){const C=n.split(" in ");return c.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const C=n.split(">=");return f.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const C=n.split(">");return u.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const C=n.split("<=");return I.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const C=n.split("<");return m.create(C[0].trim(),C[1].trim())}return/^\!\s*/.test(n)?s.create(n.substr(1).trim()):N.create(n)}static _deserializeValue(n,p){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;const C=/^'([^']*)'$/.exec(n);return C?C[1].trim():n}static _deserializeRegexValue(n,p){if((0,F.isFalsyOrWhitespace)(n)){if(p)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const C=n.indexOf("/"),j=n.lastIndexOf("/");if(C===j||C<0){if(p)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}const Y=n.slice(C+1,j),J=n[j+1]==="i"?"i":"";try{return new RegExp(Y,J)}catch(te){if(p)throw new Error(`bad regexp-value '${n}', parse error: ${te}`);return console.warn(`bad regexp-value '${n}', parse error: ${te}`),null}}}e.ContextKeyExpr=A;function w(P,n){const p=P?P.substituteConstants():void 0,C=n?n.substituteConstants():void 0;return!p&&!C?!0:!p||!C?!1:p.equals(C)}e.expressionsAreEqualWithConstantSubstitution=w;function y(P,n){return P.cmp(n)}class T{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return _.INSTANCE}}e.ContextKeyFalseExpr=T,T.INSTANCE=new T;class _{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return T.INSTANCE}}e.ContextKeyTrueExpr=_,_.INSTANCE=new _;class N{constructor(n,p){this.key=n,this.negated=p,this.type=2}static create(n,p=null){const C=S.get(n);return typeof C=="boolean"?C?_.INSTANCE:T.INSTANCE:new N(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:g(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=S.get(this.key);return typeof n=="boolean"?n?_.INSTANCE:T.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=N;class b{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=4}static create(n,p,C=null){if(typeof p=="boolean")return p?N.create(n,C):s.create(n,C);const j=S.get(n);return typeof j=="boolean"?p===(j?"true":"false")?_.INSTANCE:T.INSTANCE:new b(n,p,C)}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=S.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?_.INSTANCE:T.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=t.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=b;class c{constructor(n,p){this.key=n,this.valueKey=p,this.type=10,this.negated=null}static create(n,p){return new c(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.valueKey),C=n.getValue(this.key);return Array.isArray(p)?p.includes(C):typeof C=="string"&&typeof p=="object"&&p!==null?M.call(p,C):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=o.create(this)),this.negated}}e.ContextKeyInExpr=c;class o{constructor(n){this._actual=n,this.type=11}static create(n){return new o(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new o(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotInExpr=o;class t{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=5}static create(n,p,C=null){if(typeof p=="boolean")return p?s.create(n,C):N.create(n,C);const j=S.get(n);return typeof j=="boolean"?p===(j?"true":"false")?T.INSTANCE:_.INSTANCE:new t(n,p,C)}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=S.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?T.INSTANCE:_.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=b.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=t;class s{constructor(n,p){this.key=n,this.negated=p,this.type=3}static create(n,p=null){const C=S.get(n);return typeof C=="boolean"?C?T.INSTANCE:_.INSTANCE:new s(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:g(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=S.get(this.key);return typeof n=="boolean"?n?T.INSTANCE:_.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=N.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=s;function r(P,n){if(typeof P=="string"){const p=parseFloat(P);isNaN(p)||(P=p)}return typeof P=="string"||typeof P=="number"?n(P):T.INSTANCE}class u{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=12}static create(n,p,C=null){return r(p,j=>new u(n,j,C))}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=I.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=u;class f{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=13}static create(n,p,C=null){return r(p,j=>new f(n,j,C))}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=m.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=f;class m{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=14}static create(n,p,C=null){return r(p,j=>new m(n,j,C))}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=f.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=m;class I{constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=15}static create(n,p,C=null){return r(p,j=>new I(n,j,C))}cmp(n){return n.type!==this.type?this.type-n.type:v(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=u.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=I;class L{constructor(n,p){this.key=n,this.regexp=p,this.type=7,this.negated=null}static create(n,p){return new L(n,p)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const p=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return p<C?-1:p>C?1:0}equals(n){if(n.type===this.type){const p=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return this.key===n.key&&p===C}return!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.key);return this.regexp?this.regexp.test(p):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=D.create(this)),this.negated}}e.ContextKeyRegexExpr=L;class D{constructor(n){this._actual=n,this.type=8}static create(n){return new D(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new D(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=D;function a(P){let n=null;for(let p=0,C=P.length;p<C;p++){const j=P[p].substituteConstants();if(P[p]!==j&&n===null){n=[];for(let Y=0;Y<p;Y++)n[Y]=P[Y]}n!==null&&(n[p]=j)}return n===null?P:n}class i{constructor(n,p){this.expr=n,this.negated=p,this.type=6}static create(n,p){return i._normalizeArr(n,p)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,C=this.expr.length;p<C;p++){const j=y(this.expr[p],n.expr[p]);if(j!==0)return j}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=a(this.expr);return n===this.expr?this:i.create(n,this.negated)}evaluate(n){for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].evaluate(n))return!1;return!0}static _normalizeArr(n,p){const C=[];let j=!1;for(const Y of n)if(!!Y){if(Y.type===1){j=!0;continue}if(Y.type===0)return T.INSTANCE;if(Y.type===6){C.push(...Y.expr);continue}C.push(Y)}if(C.length===0&&j)return _.INSTANCE;if(C.length!==0){if(C.length===1)return C[0];C.sort(y);for(let Y=1;Y<C.length;Y++)C[Y-1].equals(C[Y])&&(C.splice(Y,1),Y--);if(C.length===1)return C[0];for(;C.length>1;){const Y=C[C.length-1];if(Y.type!==9)break;C.pop();const J=C.pop(),te=C.length===0,$=h.create(Y.expr.map(K=>i.create([K,J],null)),null,te);$&&(C.push($),C.sort(y))}return C.length===1?C[0]:new i(C,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new i(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());this.negated=h.create(n,this,!0)}return this.negated}}class h{constructor(n,p){this.expr=n,this.negated=p,this.type=9}static create(n,p,C){return h._normalizeArr(n,p,C)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,C=this.expr.length;p<C;p++){const j=y(this.expr[p],n.expr[p]);if(j!==0)return j}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=a(this.expr);return n===this.expr?this:h.create(n,this.negated,!1)}evaluate(n){for(let p=0,C=this.expr.length;p<C;p++)if(this.expr[p].evaluate(n))return!0;return!1}static _normalizeArr(n,p,C){let j=[],Y=!1;if(n){for(let J=0,te=n.length;J<te;J++){const $=n[J];if(!!$){if($.type===0){Y=!0;continue}if($.type===1)return _.INSTANCE;if($.type===9){j=j.concat($.expr);continue}j.push($)}}if(j.length===0&&Y)return T.INSTANCE;j.sort(y)}if(j.length!==0){if(j.length===1)return j[0];for(let J=1;J<j.length;J++)j[J-1].equals(j[J])&&(j.splice(J,1),J--);if(j.length===1)return j[0];if(C){for(let J=0;J<j.length;J++)for(let te=J+1;te<j.length;te++)q(j[J],j[te])&&(j.splice(te,1),te--);if(j.length===1)return j[0]}return new h(j,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new h(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());for(;n.length>1;){const p=n.shift(),C=n.shift(),j=[];for(const J of z(p))for(const te of z(C))j.push(i.create([J,te],null));const Y=n.length===0;n.unshift(h.create(j,null,Y))}this.negated=n[0]}return this.negated}}class l extends N{constructor(n,p,C){super(n,null);this._defaultValue=p,typeof C=="object"?l._info.push({...C,key:n}):C!==!0&&l._info.push({key:n,description:C,type:p!=null?typeof p:void 0})}static all(){return l._info.values()}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return b.create(this.key,n)}notEqualsTo(n){return t.create(this.key,n)}}e.RawContextKey=l,l._info=[],e.IContextKeyService=(0,B.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function g(P,n){return P<n?-1:P>n?1:0}function v(P,n,p,C){return P<p?-1:P>p?1:n<C?-1:n>C?1:0}function q(P,n){if(n.type===6&&P.type!==9&&P.type!==6){for(const j of n.expr)if(P.equals(j))return!0}const p=P.negate(),C=z(p).concat(z(n));C.sort(y);for(let j=0;j<C.length;j++){const J=C[j].negate();for(let te=j+1;te<C.length;te++){const $=C[te];if(J.equals($))return!0}}return!1}e.implies=q;function z(P){return P.type===9?P.expr:[P]}}),define(ne[30],ie([0,1,22,35,16,8,4,2,29]),function(Z,e,R,F,B,S,M,k,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor";var w;(function(a){a[a.Markup=1]="Markup",a[a.Code=2]="Code"})(w=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",B.Mimes.latex,B.Mimes.markdown,"image/png","image/jpeg",B.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[B.Mimes.latex,B.Mimes.markdown,"application/json",B.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var y;(function(a){a[a.Running=1]="Running",a[a.Idle=2]="Idle"})(y=e.NotebookRunState||(e.NotebookRunState={}));var T;(function(a){a[a.Unconfirmed=1]="Unconfirmed",a[a.Pending=2]="Pending",a[a.Executing=3]="Executing"})(T=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var _;(function(a){a[a.WithHardKernelDependency=0]="WithHardKernelDependency",a[a.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",a[a.Pure=2]="Pure",a[a.Never=3]="Never"})(_=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var N;(function(a){a.Always="always",a.Never="never",a.Optional="optional"})(N=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var b;(function(a){a[a.ModelChange=1]="ModelChange",a[a.Move=2]="Move",a[a.ChangeCellLanguage=5]="ChangeCellLanguage",a[a.Initialize=6]="Initialize",a[a.ChangeCellMetadata=7]="ChangeCellMetadata",a[a.Output=8]="Output",a[a.OutputItem=9]="OutputItem",a[a.ChangeCellContent=10]="ChangeCellContent",a[a.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",a[a.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",a[a.ChangeCellMime=13]="ChangeCellMime",a[a.Unknown=100]="Unknown"})(b=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var c;(function(a){a[a.Handle=0]="Handle",a[a.Index=1]="Index"})(c=e.SelectionStateType||(e.SelectionStateType={}));var o;(function(a){a[a.Replace=1]="Replace",a[a.Output=2]="Output",a[a.Metadata=3]="Metadata",a[a.CellLanguage=4]="CellLanguage",a[a.DocumentMetadata=5]="DocumentMetadata",a[a.Move=6]="Move",a[a.OutputItems=7]="OutputItems",a[a.PartialMetadata=8]="PartialMetadata",a[a.PartialInternalMetadata=9]="PartialInternalMetadata"})(o=e.CellEditType||(e.CellEditType={}));var t;(function(a){a.scheme=S.Schemas.vscodeNotebookCell;const i=/^ch(\d{7,})/;function h(P,n){return P.with({scheme:a.scheme,fragment:`ch${n.toString().padStart(7,"0")}${P.scheme!==S.Schemas.file?P.scheme:""}`})}a.generate=h;function l(P){if(P.scheme!==a.scheme)return;const n=i.exec(P.fragment);return n?{handle:Number(n[1]),notebook:P.with({scheme:P.fragment.substring(n[0].length)||S.Schemas.file,fragment:null})}:void 0}a.parse=l;function g(P,n){return P.with({scheme:S.Schemas.vscodeNotebookCellOutput,fragment:`op${n??""},${P.scheme!==S.Schemas.file?P.scheme:""}`})}a.generateCellOutputUri=g;function v(P){if(P.scheme!==S.Schemas.vscodeNotebookCellOutput)return;const n=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(P.fragment);if(!n)return;const p=n[1]&&n[1]!==""?n[1]:void 0,C=n[2];return{outputId:p,notebook:P.with({scheme:C||S.Schemas.file,fragment:null})}}a.parseCellOutputUri=v;function q(P,n,p){return P.with({scheme:p,fragment:`ch${n.toString().padStart(7,"0")}${P.scheme!==S.Schemas.file?P.scheme:""}`})}a.generateCellUri=q;function z(P,n){if(P.scheme!==n)return;const p=i.exec(P.fragment);return p?{handle:Number(p[1]),notebook:P.with({scheme:P.fragment.substring(p[0].length)||S.Schemas.file,fragment:null})}:void 0}a.parseCellUri=z})(t=e.CellUri||(e.CellUri={}));const s=a=>k.isWindows?a.replace(/\//g,"\\"):a;class r{constructor(i=[],h=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=h,this.order=[...new Set(i)].map(l=>({pattern:l,matches:R.parse(s(l))}))}sort(i){const h=new Map(F.Iterable.map(i,g=>[g,s(g)]));let l=[];for(const{matches:g}of this.order)for(const[v,q]of h)if(g(q)){l.push(v),h.delete(v);break}return h.size&&(l=l.concat([...h.keys()].sort((g,v)=>this.defaultOrder.indexOf(g)-this.defaultOrder.indexOf(v)))),l}prioritize(i,h){const l=this.findIndex(i);if(l===-1){this.order.unshift({pattern:i,matches:R.parse(s(i))});return}const g=new Set(h.map(q=>this.findIndex(q,l)));g.delete(-1);const v=Array.from(g).sort();this.order.splice(l+1,0,...v.map(q=>this.order[q]));for(let q=v.length-1;q>=0;q--)this.order.splice(v[q],1)}toArray(){return this.order.map(i=>i.pattern)}findIndex(i,h=this.order.length){const l=s(i);for(let g=0;g<h;g++)if(this.order[g].matches(l))return g;return-1}}e.MimeTypeDisplayOrder=r;function u(a,i,h,l=(g,v)=>g===v){const g=[];function v(P,n,p){if(n===0&&p.length===0)return;const C=g[g.length-1];C&&C.start+C.deleteCount===P?(C.deleteCount+=n,C.toInsert.push(...p)):g.push({start:P,deleteCount:n,toInsert:p})}let q=0,z=0;for(;;){if(q===a.length){v(q,0,i.slice(z));break}if(z===i.length){v(q,a.length-q,[]);break}const P=a[q],n=i[z];if(l(P,n)){q+=1,z+=1;continue}h(n)?(v(q,1,[]),q+=1):(v(q,0,[n]),z+=1)}return g}e.diff=u,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new A.RawContextKey("notebookEditorCursorAtBoundary","none");var f;(function(a){a.default="default",a.option="option"})(f=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function m(a){const i=a;return!!((typeof i.include=="string"||R.isRelativePattern(i.include))&&(typeof i.exclude=="string"||R.isRelativePattern(i.exclude)))}e.isDocumentExcludePattern=m;function I(a,i,h){if(Array.isArray(a.viewType)&&a.viewType.indexOf(i)>=0||a.viewType===i)return!0;if(a.filenamePattern){const l=m(a.filenamePattern)?a.filenamePattern.include:a.filenamePattern,g=m(a.filenamePattern)?a.filenamePattern.exclude:void 0;if(R.match(l,(0,M.basename)(h.fsPath).toLowerCase()))return!(g&&R.match(g,(0,M.basename)(h.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=I,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",interactiveWindowAlwaysScrollOnNewCell:"interactiveWindow.alwaysScrollOnNewCell"};var L;(function(a){a[a.Left=1]="Left",a[a.Right=2]="Right"})(L=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class D{static create(i){return`${D._prefix}${i}`}static parse(i){if(i.startsWith(D._prefix))return i.substring(D._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=D,D._prefix="notebook/"}),define(ne[36],ie([0,1,37,38,9,27,30,11]),function(Z,e,R,F,B,S,M,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=e.CellSequence=void 0;function A(b){let c=(0,F.numberHash)(104579,0);for(let o=0;o<b.buffer.length;o++)c=(0,F.doHash)(b.buffer[o],c);return c}class w{constructor(c,o,t,s,r,u,f){this.handle=c,this._source=o,this.language=t,this.cellKind=s,this.outputs=r,this.metadata=u,this.internalMetadata=f,this._primaryKey=null,this._hash=null}get textBuffer(){if(this._textBuffer)return this._textBuffer;const c=new S.PieceTreeTextBufferBuilder;c.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const o=c.finish(!0);return this._textBuffer=o.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,F.hash)(this.getValue())),this._primaryKey}getFullModelRange(){const c=this.textBuffer.getLineCount();return new k.Range(1,1,c,this.textBuffer.getLineLength(c)+1)}getValue(){const c=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(c,1):this.textBuffer.getValueInRange(c,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,F.hash)([(0,F.hash)(this.language),(0,F.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(c=>({outputs:c.outputs.map(o=>({mime:o.mime,data:A(o.data)})),metadata:c.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,F.hash)([(0,F.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class y{constructor(c,o,t){this.uri=c,this.cells=o,this.metadata=t}acceptModelChanged(c){c.rawEvents.forEach(o=>{if(o.kind===M.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(o.changes);else if(o.kind===M.NotebookCellsChangeType.Move){const t=this.cells.splice(o.index,1);this.cells.splice(o.newIdx,0,...t)}else if(o.kind===M.NotebookCellsChangeType.Output){const t=this.cells[o.index];t.outputs=o.outputs}else if(o.kind===M.NotebookCellsChangeType.ChangeCellLanguage){const t=this.cells[o.index];t.language=o.language}else if(o.kind===M.NotebookCellsChangeType.ChangeCellMetadata){const t=this.cells[o.index];t.metadata=o.metadata}else if(o.kind===M.NotebookCellsChangeType.ChangeCellInternalMetadata){const t=this.cells[o.index];t.internalMetadata=o.internalMetadata}})}_spliceNotebookCells(c){c.reverse().forEach(o=>{const s=o[2].map(r=>new w(r.handle,r.source,r.language,r.cellKind,r.outputs,r.metadata));this.cells.splice(o[0],o[1],...s)})}}class T{constructor(c){this.textModel=c}getElements(){const c=new Int32Array(this.textModel.cells.length);for(let o=0;o<this.textModel.cells.length;o++)c[o]=this.textModel.cells[o].getComparisonValue();return c}getCellHash(c){const o=Array.isArray(c.source)?c.source.join(`
`):c.source;return(0,F.hash)([(0,F.hash)(o),c.metadata])}}e.CellSequence=T;class _{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(c,o){this._models[c]=new y(B.URI.parse(c),o.cells.map(t=>new w(t.handle,t.source,t.language,t.cellKind,t.outputs,t.metadata)),o.metadata)}acceptModelChanged(c,o){this._models[c]?.acceptModelChanged(o)}acceptRemovedModel(c){!this._models[c]||delete this._models[c]}computeDiff(c,o){const t=this._getModel(c),s=this._getModel(o);return{cellsDiff:new R.LcsDiff(new T(t),new T(s)).ComputeDiff(!1)}}_getModel(c){return this._models[c]}}e.NotebookEditorSimpleWorker=_;function N(b){return new _}e.create=N})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/3b889b090b5ad5793f524b5d1d39fda662b96a2a/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
