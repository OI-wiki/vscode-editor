/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.8.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var c="function",O="object",a="undefined",K="prototype",l="hasOwnProperty",n=Object,f=n[K],t=n.assign,r=(n.create,n.defineProperty),g=f[l],o=null;function te(e){return void 0===e&&(e=!0),o&&e||(typeof globalThis!==a&&globalThis&&(o=globalThis),typeof self!==a&&self&&(o=self),typeof window!==a&&window&&(o=window),typeof global!==a&&global&&(o=global)),o}function I(e){throw new TypeError(e)}(te()||{}).Symbol,(te()||{}).Reflect;var ne=t||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])f[l].call(t,a)&&(e[a]=t[a]);return e},D=function(e,t){return(D=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[l](n)&&(e[n]=t[n])})(e,t)},d="",M="isInitialized",H="teardown",p="core",k="update",L="disabled",S="_doTeardown",re="toISOString",ae="indexOf",P="trim",t="toString",_="constructor",j=r,A=n.freeze,E=(n.seal,n.keys),i=String[K],R=i[P],oe=(i.endsWith,i.startsWith,Date[K][re]),i=Array.isArray,F=f[t],N=g[t],U=N.call(n),ie=/-([a-z])/g,ue=/([^\w\d_$])/g,se=/^(\d+[\w\d_$])/,ce=Object.getPrototypeOf;function le(e){if(e){if(ce)return ce(e);e=e.__proto__||e[K]||e[_];if(e)return e}return null}function fe(e){return e===undefined||typeof e===a}function X(e){return null===e||fe(e)}function de(e){return!(!e||typeof e!==O)}function z(e){return!(!e||typeof e!==c)}function ge(e){var t=e;return e&&$(e)?(t=(t=e.replace(ie,function(e,t){return t.toUpperCase()})).replace(ue,"_")).replace(se,function(e,t){return"_"+t}):t}function V(e,t){if(e)for(var n in e)g.call(e,n)&&t.call(e,n,e[n])}function pe(e,t){return!(!e||!t||!~e.indexOf(t))}var W=i||function(e){return!(!e||"[object Array]"!==F.call(e))};function $(e){return"string"==typeof e}function he(e){return e&&"object"==typeof e&&(!(e=(ce||le)(e))||typeof(e=e[_]&&g.call(e,_)?e[_]:e)===c&&N.call(e)===U)}function B(e,t,n){var r=e.length;try{for(var a=0;a<r&&!(a in e&&-1===t.call(n||e,e[a],a,e));a++);}catch(o){}}function ve(e){return e&&(R&&e[P]?e[P]():e.replace?e.replace(/^\s+|\s+$/g,""):e)}var me=!{toString:null}.propertyIsEnumerable("toString"),xe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ye(e){var t=typeof e;if(t===c||t===O&&null!==e||I("objKeys called on non-object"),!me&&E)return E(e);var n,r=[];for(n in e)e&&g.call(e,n)&&r.push(n);if(me)for(var a=xe.length,o=0;o<a;o++)e&&g.call(e,xe[o])&&r.push(xe[o]);return r}var Ce=A||function(e){return e};function Te(){var e=Date;return e.now?e.now():(new e).getTime()}var be="constructor",h="prototype",we="function",qe="_dynInstFuncs",Ie="_isDynProxy",v="_dynClass",De="_dynInstChk",Me=De,He="_dfOpts",ke="_unknown_",Le="__proto__",Se="_dyn"+Le,Pe="_dynInstProto",_e="useBaseInst",je="setInstFuncs",Ae=Object,Ee=Ae.getPrototypeOf,Re=Ae.getOwnPropertyNames,Fe=0;function m(e,t){return e&&Ae[h].hasOwnProperty.call(e,t)}function Ne(e){return e&&(e===Ae[h]||e===Array[h])}function Ue(e){return Ne(e)||e===Function[h]}function x(e){if(e){if(Ee)return Ee(e);var t=e[Le]||e[h]||(e[be]?e[be][h]:null),n=e[Se]||t;m(e,Se)||(delete e[Pe],n=e[Se]=e[Pe]||e[Se],e[Pe]=t)}return n}function Oe(e,t){var n=[];if(Re)n=Re(e);else for(var r in e)"string"==typeof r&&m(e,r)&&n.push(r);if(n&&0<n.length)for(var a=0;a<n.length;a++)t(n[a])}function Ke(e,t,n){return t!==be&&typeof e[t]===we&&(n||m(e,t))}function Xe(e){throw new TypeError("DynamicProto: "+e)}function ze(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function Ve(e,t){return m(e,h)?e.name||t||ke:((e||{})[be]||{}).name||t||ke}function C(e,r,t,n){m(e,h)||Xe("theClass is an invalid class definition.");var a,o,i,u,s,c,l=e[h],f=(function(e){if(!Ee)return 1;for(var t=[],n=x(r);n&&!Ue(n)&&!ze(t,n);){if(n===e)return 1;t.push(n),n=x(n)}}(l)||Xe("["+Ve(e)+"] is not in class hierarchy of ["+Ve(r)+"]"),null),e=(m(l,v)?f=l[v]:(f="_dynCls$"+Ve(e,"_")+"$"+Fe,Fe++,l[v]=f),C[He]),d=!!e[_e],g=(d&&n&&n[_e]!==undefined&&(d=!!n[_e]),o={},Oe(a=r,function(e){!o[e]&&Ke(a,e,!1)&&(o[e]=a[e])}),o),d=(t(r,function(e,t,n,o){function r(e,t,n){var r,a=t[n];return a[Ie]&&o&&!1!==(r=e[qe]||{})[Me]&&(a=(r[t[v]]||{})[n]||a),function(){return a.apply(e,arguments)}}for(var a={},i=(Oe(n,function(e){a[e]=r(t,n,e)}),x(e)),u=[];i&&!Ue(i)&&!ze(u,i);)Oe(i,function(e){!a[e]&&Ke(i,e,!Ee)&&(a[e]=r(t,i,e))}),u.push(i),i=x(i);return a}(l,r,g,d)),!!Ee&&!!e[je]);i=l,t=f,u=r,s=g,e=!1!==(d=d&&n?!!n[je]:d),Ne(i)||(l=u[qe]=u[qe]||{},c=l[t]=l[t]||{},!1!==l[Me]&&(l[Me]=!!e),Oe(u,function(e){var n,r,a;Ke(u,e,!1)&&u[e]!==s[e]&&(c[e]=u[e],delete u[e],m(i,e)&&(!i[e]||i[e][Ie])||(i[e]=(n=i,r=e,(a=function(){var e,t;return(function(e,t,n,r){var a=null;if(e&&m(n,v)){var o=e[qe]||{};if((a=(o[n[v]]||{})[t])||Xe("Missing ["+t+"] "+we),!a[De]&&!1!==o[Me]){for(var i=!m(e,t),u=x(e),s=[];i&&u&&!Ue(u)&&!ze(s,u);){var c=u[t];if(c){i=c===r;break}s.push(u),u=x(u)}try{i&&(e[t]=a),a[De]=1}catch(l){o[Me]=!1}}}return a}(this,r,n,a)||(typeof(t=(t=n[e=r])===a?x(n)[e]:t)!==we&&Xe("["+e+"] is not a "+we),t)).apply(this,arguments)})[Ie]=1,a)))}))}var We="window",$e="documentMode",Be="console",Je="performance",Ye="JSON",Ge="crypto",Ze="msCrypto",Qe="msie",et="trident/",tt="XMLHttpRequest",nt=null,rt=null;function J(e){var t=te();return t&&t[e]?t[e]:e===We&&typeof window===O&&window?window:null}function at(){return typeof document===O&&document?document:J("document")}function ot(){return typeof navigator===O&&navigator?navigator:J("navigator")}function it(){return J(Je)}function ut(){return typeof JSON===O&&JSON||null!==J(Ye)}function st(){return ut()?JSON||J(Ye):null}function Y(e){var t=Object[K].toString.call(e),n=d;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":ut()&&(n=st().stringify(e)),t+n}C[He]={setInstFuncs:!0,useBaseInst:!0};var ct=null;function lt(e){return e?'"'+e.replace(/\"/g,d)+'"':d}function ft(e,t){var n,r=typeof console!==a?console:J(Be);r&&(n="log",z(r[n=r[e]?e:n])&&r[n](t))}gt.dataType="MessageData";var dt=gt;function gt(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e;n=d,ut()&&(n=st().stringify(r)),e=(t?" message:"+lt(t):d)+(r?" props:"+lt(n):d);this.message+=e}var pt=function Gn(a){this.identifier="DiagnosticLogger",this.queue=[];var u=0,s={};C(Gn,this,function(o){function e(e,t){e=a[e];return X(e)?t:e}function i(e,t){var n,r=(n=(n=ct)||!0===a.disableDbgExt?n:ct||(r=J("Microsoft"),ct=r?r.ApplicationInsights:ct))?n.ChromeDbgExt:null;r&&r.diagLog&&r.diagLog(e,t)}X(a)&&(a={}),o.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},o.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},o.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},o.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},o.throwInternal=function(e,t,n,r,a){t=new dt(t,n,a=void 0!==a&&a,r);if(o.enableDebugExceptions())throw Y(t);n=1===e?"errorToConsole":"warnToConsole";fe(t.message)?i("throw"+(1===e?"Critical":"Warning"),t):(r=o.consoleLoggingLevel(),a?(a=+t.messageId,!s[a]&&e<=r&&(o[n](t.message),s[a]=!0)):e<=r&&o[n](t.message),o.logInternalMessage(e,t))},o.warnToConsole=function(e){ft("warn",e),i("warning",e)},o.errorToConsole=function(e){ft("error",e),i("error",e)},o.resetInternalMessageCount=function(){u=0,s={}},o.logInternalMessage=function(e,t){var n,r;u>=o.maxInternalMessageLimit()||(r=!0,n="AITR_"+t.messageId,s[n]?r=!1:s[n]=!0,r&&(e<=o.telemetryLoggingLevel()&&(o.queue.push(t),u++,i(1===e?"error":"warn",t)),u===o.maxInternalMessageLimit()&&(r=new dt(23,n="Internal events throttle limit per PageView reached for this app.",!1),o.queue.push(r),1===e?o.errorToConsole(n):o.warnToConsole(n))))}})};function y(e,t,n,r,a,o){void 0===o&&(o=!1),(e||new pt).throwInternal(t,n,r,a,o)}u.ParentContextKey="parent",u.ChildrenContextKey="childEvts";var ht=u;function u(e,a,t){var r,o=this,i=!1;o.start=Te(),o.name=e,o.isAsync=t,o.isChildEvt=function(){return!1},z(a)&&(i=function(e){if(j)try{var t={enumerable:!0,configurable:!0,get:function(){return!r&&z(a)&&(r=a(),a=null),r}};return j(e,"payload",t),!0}catch(n){}return!1}(o)),o.getCtx=function(e){return e?(e===u.ParentContextKey||e===u.ChildrenContextKey?o:o.ctx||{})[e]:null},o.setCtx=function(e,t){e&&(e===u.ParentContextKey?(o[e]||(o.isChildEvt=function(){return!0}),o[e]=t):e===u.ChildrenContextKey?o[e]=t:(o.ctx=o.ctx||{})[e]=t)},o.complete=function(){var e=0,t=o.getCtx(u.ChildrenContextKey);if(W(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}o.time=Te()-o.start,o.exTime=o.time-e,o.complete=function(){},!i&&z(a)&&(o.payload=a())}}var vt="CoreUtils.doPerf";function mt(e,t,n,r,a){if(e)if(e=z(e.getPerfMgr)?e.getPerfMgr():e){var o,i=void 0,u=e.getCtx(vt);try{if(i=e.create(t(),r,a))return u&&i.setCtx&&(i.setCtx(ht.ParentContextKey,u),u.getCtx&&u.setCtx&&((o=u.getCtx(ht.ChildrenContextKey))||(o=[],u.setCtx(ht.ChildrenContextKey,o)),o.push(i))),e.setCtx(vt,i),n(i)}catch(s){i&&i.setCtx&&i.setCtx("exception",s)}finally{i&&e.fire(i),e.setCtx(vt,u)}}n()}var xt=4294967296,s=4294967295,yt=!1,Ct=123456789,Tt=987654321;function bt(e){var t,n=0,r=J(Ge)||J(Ze);if(0===(n=r&&r.getRandomValues?r.getRandomValues(new Uint32Array(1))[0]&s:n)&&(!(r=ot())||r.userAgent===rt&&null!==nt||(r=((rt=r.userAgent)||d).toLowerCase(),nt=pe(r,Qe)||pe(r,et)),nt)){if(!yt)try{var a=2147483647&Te();(t=(Math.random()*xt^a)+a)<0&&(t>>>=0),Ct=123456789+t&s,Tt=987654321-t&s,yt=!0}catch(o){}r=((Tt=36969*(65535&Tt)+(Tt>>16)&s)<<16)+(65535&(Ct=18e3*(65535&Ct)+(Ct>>16)&s))>>>0&s|0,n=(r>>>=0)&s}return 0===n&&(n=Math.floor(xt*Math.random()|0)),e||(n>>>=0),n}var wt=r,qt="."+function(e){void 0===e&&(e=22);for(var t=bt()>>>0,n=0,r=d;r.length<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&t]||"",t>>>=6,5==++n&&(t=(bt()<<2&4294967295|3&t)>>>0,n=0);return r}(6),It=0;function Dt(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function Mt(e,t){return ge(e+It+++((t=void 0!==t&&t)?".2.8.4":"")+qt)}function Ht(e){var o={id:Mt("_aiData-"+(e||"")+".2.8.4"),accept:Dt,get:function(e,t,n,r){var a=e[o.id];return a?a[ge(t)]:(r&&((a=function(e,t){var n=t[e.id];if(!n){n={};try{Dt(t)&&!function(e,t,n){if(wt)try{return wt(e,t,{value:n,enumerable:!1,configurable:!0}),1}catch(r){}}(t,e.id,n)&&(t[e.id]=n)}catch(r){}}return n}(o,e))[ge(t)]=n),n)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(n){}}};return o}var kt="attachEvent",Lt="addEventListener",St=(Mt("aiEvtPageHide"),Mt("aiEvtPageShow"),/\.[\.]+/g),Pt=/[\.]+$/,_t=1,jt=Ht("events"),At=/^([^.]*)(?:\.(.+)|)/;function Et(e){return e&&e.replace?e.replace(/^\s*\.*|\.*\s*$/g,""):e}function Rt(e,t){t&&(n="",W(t)?(n="",B(t,function(e){(e=Et(e))&&("."!==e[0]&&(e="."+e),n+=e)})):n=Et(t),n&&(e=(e||"")+(n="."!==n[0]?"."+n:n)));var n,t=At.exec(e||"")||[];return{type:t[1],ns:(t[2]||"").replace(St,".").replace(Pt,"").split(".").sort().join(".")}}function Ft(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=d,r=0;r<4;r++)n+=t[15&(e=bt())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&bt())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+a+n.substr(16,3)+n.substr(19,12)}var Nt="00",Ut="ff",Ot="00000000000000000000000000000000",Kt="0000000000000000";function Xt(e,t,n){return e&&e.length===t&&e!==n&&e.match(/^[\da-f]*$/)}function zt(e,t,n){return Xt(e,t)?e:n}function Vt(e,t,n,r){return{version:Xt(r,2,Ut)?r:Nt,traceId:Wt(e)?e:Ft(),spanId:$t(t)?t:Ft().substr(0,16),traceFlags:0<=n&&n<=255?n:1}}function Wt(e){return Xt(e,32,Ot)}function $t(e){return Xt(e,16,Kt)}function Bt(e){var t,n;return e?(Xt(t=function(e){for(var t=(e=isNaN(e)||e<0||255<e?1:e).toString(16);t.length<2;)t="0"+t;return t}(e.traceFlags),2)||(t="01"),n=e.version||Nt,"".concat(n="00"!==n&&"ff"!==n?Nt:n,"-").concat(zt(e.traceId,32,Ot),"-").concat(zt(e.spanId,16,Kt),"-").concat(t)):""}var Jt=Ht("plugin");function Yt(e){return Jt.get(e,"state",{},!0)}var Gt="TelemetryPluginChain",Zt="_hasRun",Qt="_getTelCtx",en=0;function tn(e,i,n,t){var r=null,a=[],o=(null!==t&&(r=t?function(e,t,n){for(;e;){if(e.getPlugin()===n)return e;e=e.getNext()}return rn([n],t.config||{},t)}(e,n,t):e),{_next:function(){var e,t=r;return r=t?t.getNext():null,t||(e=a)&&0<e.length&&(B(e,function(e){try{e.func.call(e.self,e.args)}catch(t){y(n.logger,2,73,"Unexpected Exception during onComplete - "+Y(t))}}),a=[]),t},ctx:{core:function(){return n},diagLog:function(){return(n||{}).logger||new pt(i)},getCfg:function(){return i},getExtCfg:u,getConfig:function(e,t,n){void 0===n&&(n=!1);var r,e=u(e,null);return e&&!X(e[t])?r=e[t]:i&&!X(i[t])&&(r=i[t]),X(r)?n:r},hasNext:function(){return!!r},getNext:function(){return r},setNext:function(e){r=e},iterate:function(e){for(;t=o._next();){var t=t.getPlugin();t&&e(t)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&a.push({func:e,self:fe(t)?o.ctx:t,args:n})}}});function u(e,t,n){var r,a,o;return void 0===t&&(t={}),void 0===n&&(n=0),(r=i&&(a=i.extensionConfig)&&e?a[e]:r)?de(t)&&0!==n&&(o=function d(){var e=arguments,t=e[0]||{},n=e.length,r=!1,a=1;for(0<n&&"boolean"==typeof t&&(r=t,t=e[a]||{},a++),de(t)||(t={});a<n;a++){var o,i,u,s,c=e[a],l=W(c),f=de(c);for(o in c)(l&&o in c||f&&g.call(c,o))&&(i=c[o],u=void 0,r&&i&&((u=W(i))||he(i))&&(s=t[o],u?W(s)||(s=[]):he(s)||(s={}),i=d(r,s,i)),i!==undefined&&(t[o]=i))}return t}(!0,t,r),i&&2===n&&V(t,function(e){var t;X(o[e])&&!X(t=i[e])&&(o[e]=t)}),r=o):r=t,r}return o}function nn(e,n,r,t){var a=tn(e,n,r,t),o=a.ctx;return o.processNext=function(e){var t=a._next();return t&&t.processTelemetry(e,o),!t},o.createNew=function(e,t){return nn((e=W(e=void 0===e?null:e)?rn(e,n,r,t):e)||o.getNext(),n,r,t)},o}function rn(e,t,n,r){var a,o=null,i=!r;return W(e)&&0<e.length&&(a=null,B(e,function(e){(i=!i&&r===e||i)&&e&&z(e.processTelemetry)&&(e=an(e,t,n),o=o||e,a&&a._setNext(e),a=e)})),r&&!o?rn([r],t,n):o}function an(s,r,a){var c=null,o=z(s.processTelemetry),i=z(s.setNextPlugin),l=s?s.identifier+"-"+s.priority+"-"+en++:"Unknown-0-"+en++,u={getPlugin:function(){return s},getNext:function(){return c},processTelemetry:function(n,e){var t;f(e=e||(t=(t=s&&z(s[Qt])?s[Qt]():t)||nn(u,r,a)),function(e){if(!s||!o)return!1;var t=Yt(s);return!t.teardown&&!t[L]&&(i&&s.setNextPlugin(c),s.processTelemetry(n,e),!0)},"processTelemetry",function(){return{item:n}},!n.sync)||e.processNext(n)},unload:function(r,a){f(r,function(){var e,t,n=!1;return s&&(e=Yt(s),t=s[p]||e.core,!s||t&&t!==r[p]()||e[H]||(e[p]=null,e[H]=!0,e[M]=!1,s[H]&&!0===s[H](r,a)&&(n=!0))),n},"unload",function(){},a.isAsync)||r.processNext(a)},update:function(r,a){f(r,function(){var e,t,n=!1;return s&&(e=Yt(s),t=s[p]||e.core,!s||t&&t!==r[p]()||e[H]||s[k]&&!0===s[k](r,a)&&(n=!0)),n},"update",function(){},!1)||r.processNext(a)},_id:l,_setNext:function(e){c=e}};function f(n,r,a,e,t){var o=!1,i=s?s.identifier:Gt,u=(u=n[Zt])||(n[Zt]={});return n.setNext(c),s&&mt(n[p](),function(){return i+":"+a},function(){u[l]=!0;try{var e=c?c._id:d;e&&(u[e]=!1),o=r(n)}catch(t){e=!c||u[c._id];e&&(o=!0),c&&e||y(n.diagLog(),1,73,"Plugin ["+i+"] failed during "+a+" - "+Y(t)+", run flags: "+Y(u))}},e,t),o}return Ce(u)}function on(){var t=[];return{add:function(e){e&&t.push(e)},run:function(n,r){B(t,function(e){try{e(n,r)}catch(t){y(n.diagLog(),2,73,"Unexpected error calling unload handler - "+Y(t))}}),t=[]}}}var T="getPlugin",t=function Zn(){var o,i,l,f,d,u=this;function t(e){var t,e=e=void 0===e?null:e;return e||(t=i||nn(null,{},u.core),e=l&&l[T]?t.createNew(null,l[T]):t.createNew(null,l)),e}function s(e,t,n){e&&(o="extensionConfig",a=r=[],e&&(a=e[o])!==r&&X(a)&&(e[o]=a=r)),!n&&t&&(n=t.getProcessTelContext().getNext());var r,a,o=l;l&&l[T]&&(o=l[T]()),u.core=t,i=nn(n,e,t,o)}function g(){o=!1,u.core=null,l=i=null,d=[],f=on()}g(),C(Zn,u,function(c){var e,t,n,r,a;c.initialize=function(e,t,n,r){s(e,t,r),o=!0},c.teardown=function(e,t){var n,r,a,o,i=c.core;if(i&&(!e||i===e.core()))return r=!1,a=e||function s(e,n,t){var r=n.config||{},a=tn(e,r,n,t),o=a.ctx;return o.processNext=function(e){var t=a._next();return t&&t.unload(o,e),!t},o.createNew=function(e,t){return s((e=W(e=void 0===e?null:e)?rn(e,r,n,t):e)||o.getNext(),n,t)},o}(null,i,l&&l[T]?l[T]():l),o=t||{reason:0,isAsync:!1},c[S]&&!0===c[S](a,o,u)?n=!0:u(),n;function u(){r||(r=!0,f.run(a,t),B(d,function(e){e.rm()}),d=[],!0===n&&a.processNext(o),g())}},c.update=function(e,t){var n,r,a,o=c.core;if(o&&(!e||o===e.core()))return r=!1,a=e||function u(e,n,t){var r=n.config||{},a=tn(e,r,n,t).ctx;return a.processNext=function(t){return a.iterate(function(e){z(e.update)&&e.update(a,t)})},a.createNew=function(e,t){return u((e=W(e=void 0===e?null:e)?rn(e,r,n,t):e)||a.getNext(),n,t)},a}(null,o,l&&l[T]?l[T]():l),c._doUpdate&&!0===c._doUpdate(a,t||{reason:0},i)?n=!0:i(),n;function i(){r||(r=!0,s(a.getCfg(),a.core(),a.getNext()))}},c._addHook=function(e){e&&(W(e)?d=d.concat(e):d.push(e))},n="_addUnloadCb",t=function(){return f},(e=c)&&t&&(e[n]=(a=r=null,z(n=t)?r=n:a=n,function(){var e=arguments;if(a=r?r():a)return a.add.apply(a,e)}))}),u.diagLog=function(e){return t(e).diagLog()},u[M]=function(){return o},u.setInitialized=function(e){o=e},u.setNextPlugin=function(e){l=e},u.processNext=function(e,t){t?t.processNext(e):l&&z(l.processTelemetry)&&l.processTelemetry(e,null)},u._getTelCtx=t},un="_aiHooks",sn=["req","rsp","hkErr","fnErr"];function cn(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function ln(e,i,u,s,c){0<=c&&c<=2&&cn(e,function(e,t){var e=e.cbks,n=e[sn[c]];if(n){i.ctx=function(){return s[t]=s[t]||{}};try{n.apply(i.inst,u)}catch(a){n=i.err;try{var r=e.hkErr;r&&(i.err=a,r.apply(i.inst,u))}catch(o){}finally{i.err=n}}}})}function fn(s){return function(){var n=arguments,e=s.h,r={name:s.n,inst:this,ctx:null,set:function(e,t){(n=o([],n))[e]=t,a=o([r],n)}},t=[],a=o([r],n);function o(t,e){return cn(e,function(e){t.push(e)}),t}r.evt=J("event"),ln(e,r,a,t,0);var i=s.f;if(i)try{r.rslt=i.apply(this,n)}catch(u){throw r.err=u,ln(e,r,a,t,3),u}return ln(e,r,a,t,1),r.rslt}}function dn(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n){e=function o(e,t,n){var r=null;return e&&(g.call(e,t)?r=e:n&&(r=o(le(e),t,!1))),r}(e,t,r);if(e){r=e[t];if(typeof r===c)return e=e,t=t,n=n,(a=r&&r[un])||((r=fn(a={i:0,n:t,f:r,h:[]}))[un]=a,e[t]=r),t={id:a.i,cbks:n,rm:function(){var n=this.id;cn(a.h,function(e,t){return e.id===n&&(a.h.splice(t,1),1)})}},a.i++,a.h.push(t),t}}var a;return null}gn={},V({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]},function(e,t){gn[e]=t[1],gn[t[0]]=t[1]}),i=gn,A&&V(i,function(e,t){(W(t)||de(t))&&A(t)});var gn,G=Ce(i);function pn(e,t,n){var r,a,o=t.length,i=(e=e,(t=t)&&150<(t=ve(t.toString())).length&&(a=t.substring(0,150),y(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),a||t);if(i.length!==o){for(var u=0,s=i;n[s]!==undefined;)u++,s=i.substring(0,147)+(r=void 0,(r="00"+u).substr(r.length-3));i=s}return i}function Z(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=ve(t)).toString().length>n&&(r=t.toString().substring(0,n),y(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function hn(e,t){var n;return t&&2048<(t=ve(t)).length&&(n=t.substring(0,2048),y(e,2,66,"input is too long, it has been truncated to 2048 characters.",{data:t},!0)),n||t}function vn(r,e){var a;return e&&(a={},V(e,function(e,t){if(de(t)&&ut())try{t=st().stringify(t)}catch(n){y(r,2,49,"custom property is not valid",{exception:n},!0)}t=Z(r,t,8192),e=pn(r,e,a),a[e]=t}),e=a),e}var mn="";function xn(e){var t=mn+Math.floor((e=Math.round(e=isNaN(e)||e<0?0:e))/1e3)%60,n=mn+Math.floor(e/6e4)%60,r=mn+Math.floor(e/36e5)%24,a=Math.floor(e/864e5),e=1===(e=mn+e%1e3).length?"00"+e:2===e.length?"0"+e:e,t=t.length<2?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r;return(0<a?a+".":mn)+r+":"+n+":"+t+"."+e}var yn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Cn="not_specified",Tn="iKey",bn=at()||{},wn=0,qn=[null,null,null,null,null];function In(n){var e=wn,t=qn,r=t[e];return bn.createElement?t[e]||(r=t[e]=bn.createElement("a")):r={host:function(){var e=Dn(n,!0)||"";if(e){var t=e.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=t&&3<t.length&&$(t[2])&&0<t[2].length)return t[2]+(t[3]||"")}return e}()},r.href=n,++e>=t.length&&(e=0),wn=e,r}function Dn(e,t){var n=null;return e&&null!=(e=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<e.length&&$(e[2])&&0<e[2].length&&(n=e[2]||"",t&&2<e.length&&(t=(e[1]||"").toLowerCase(),e=e[3]||"",n+=e="http"==t&&":80"===e||"https"==t&&":443"===e?"":e)),n}var Mn=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Hn={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var a=In(t).host.toLowerCase();if(a&&(~a.indexOf(":443")||~a.indexOf(":80"))&&(a=(Dn(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&a&&a!==n)return!1;var o,n=e&&e.correlationHeaderDomains;if(n&&(B(n,function(e){e=RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));o=o||e.test(a)}),!o))return!1;var i=e&&e.correlationHeaderExcludedDomains;if(!i||0===i.length)return!0;for(r=0;r<i.length;r++)if(RegExp(i[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(a))return!1;return a&&0<a.length},getCorrelationContext:function(e){if(e){e=Hn.getCorrelationContextValue(e,G[1]);if(e&&e!==Hn.correlationIdPrefix)return e}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var a=n[r].split("=");if(2===a.length&&a[0]===t)return a[1]}}};function kn(){var e=it();if(e&&e.now&&e.timing){e=e.now()+e.timing.navigationStart;if(0<e)return e}return Te()}function Ln(e,t){return 0===e||0===t||X(e)||X(t)?null:t-e}Pn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Pn.dataType="RemoteDependencyData";var Sn=Pn;function Pn(e,t,n,r,a,o,i,u,s,c,l,f){void 0===s&&(s="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d,g,p,h,v=this,n=(v.ver=2,v.id=t,v.duration=xn(a),v.success=o,v.resultCode=i+"",v.type=Z(e,s),t=e,a=u,s=i=o=r,i=(u=n)&&0<u.length?(g=(n=In(u)).host,i||(null!=n.pathname?("/"!=((d=0===n.pathname.length?"/":n.pathname)[0]||"")&&(d="/"+d),s=n.pathname,Z(t,a?a+" "+d:d)):Z(t,u))):g=o,{target:g,name:i,data:s});v.data=hn(e,r)||n.data,v.target=Z(e,n.target),c&&(v.target="".concat(v.target," | ").concat(c)),v.name=Z(e,n.name),v.properties=vn(e,l),v.measurements=(p=e,(a=f)&&(h={},V(a,function(e,t){e=pn(p,e,h),h[e]=t}),a=h),a)}var b="properties";function _n(e,t,n){t=e[t],n=e[n];return t&&n?Ln(t,n):0}function w(e,t,n,r,a){n=_n(n,r,a);return n?q(e,t,xn(n)):0}function q(e,t,n){var r="ajaxPerf",a=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,a=1),a}var jn,An=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},En=function Qn(e,t,n){var r=this,a=n,y="responseText";r.perfMark=null,r.completed=!1,r.requestHeadersSize=null,r.requestHeaders=null,r.responseReceivingDuration=null,r.callbackDuration=null,r.ajaxTotalDuration=null,r.aborted=0,r.pageUrl=null,r.requestUrl=null,r.requestSize=0,r.method=null,r.status=null,r.requestSentTime=null,r.responseStartedTime=null,r.responseFinishedTime=null,r.callbackFinishedTime=null,r.endTime=null,r.xhrMonitoringState=new An,r.clientFailure=0,r.traceID=e,r.spanID=t,C(Qn,r,function(x){x.getAbsoluteUrl=function(){return x.requestUrl?(e=In(x.requestUrl))?e.href:void 0:null;var e},x.getPathName=function(){return x.requestUrl?hn(a,(e=x.method,t=x.requestUrl,e?e.toUpperCase()+" "+t:t)):null;var e,t},x.CreateTrackItem=function(e,t,n){if(x.ajaxTotalDuration=Math.round(1e3*Ln(x.requestSentTime,x.responseFinishedTime))/1e3,x.ajaxTotalDuration<0)return null;(e={id:"|"+x.traceID+"."+x.spanID,target:x.getAbsoluteUrl(),name:x.getPathName(),type:e,startTime:null,duration:x.ajaxTotalDuration,success:200<=+x.status&&+x.status<400,responseCode:+x.status,method:x.method})[b]={HttpMethod:x.method};var r,a,o,i,u,s,c,l,f,d,g,p,h,v,m;return x.requestSentTime&&(e.startTime=new Date,e.startTime.setTime(x.requestSentTime)),i=(r=x).perfTiming,u=(a=e)[b]||{},s=0,h="duration",v="startTime",c="connectEnd",l="requestStart",m="responseEnd",f="transferSize",d="encodedBodySize",g="decodedBodySize",p="serverTiming",i?(s=(s=(s=(s=(s=(s=(s|=w(u,"End",i,"redirectStart","End"))|w(u,"domainLookup",i,"domainLookupStart","domainLookupEnd"))|w(u,"connect",i,"connectStart",c))|w(u,"request",i,l,"requestEnd"))|w(u,"response",i,"responseStart",m))|w(u,"networkConnect",i,v,c))|w(u,"sentRequest",i,l,m),s=(s|=q(u,h,c=i[h]||_n(i,v,m)||0))|q(u,"perfTotal",c),(l=i[p])&&(o={},B(l,function(e,t){var t=ge(e.name||""+t),n=o[t]||{};V(e,function(e,t){!("name"!==e&&$(t)||"number"==typeof t)||!(t=n[e]?n[e]+";"+t:t)&&$(t)||(n[e]=t)}),o[t]=n}),s|=q(u,p,o)),s=(s=(s|=q(u,f,i[f]))|q(u,d,i[d]))|q(u,g,i[g])):r.perfMark&&(s|=q(u,"missing",r.perfAttempts)),s&&(a[b]=u),t&&0<ye(x.requestHeaders).length&&(e[b]=e[b]||{},e[b].requestHeaders=x.requestHeaders),n&&(h=n())&&((v=h.correlationContext)&&(e.correlationContext=v),h.headerMap&&0<ye(h.headerMap).length&&(e[b]=e[b]||{},e[b].responseHeaders=h.headerMap),x.errorStatusText&&400<=x.status&&(m=h.type,e[b]=e[b]||{},""!==m&&"text"!==m||(e[b][y]=h[y]?h.statusText+" - "+h[y]:h.statusText),"json"===m&&(e[b][y]=h.response?h.statusText+" - "+JSON.stringify(h.response):h.statusText))),e}})},Rn="ai.ajxmn.",Fn="diagLog",Q="ajaxData",Nn="fetch",Un="trackDependencyDataInternal",On=0;function Kn(e){var t=!1,n=(function(){var e=!1;try{e=!!J(tt)}catch(t){}return e}()&&(t=!(X(n=XMLHttpRequest[K])||X(n.open)||X(n.send)||X(n.abort))),function(e){var t=((e=(e=void 0===e?null:e)?e:(t=ot()||{})?(t.userAgent||d).toLowerCase():d)||d).toLowerCase();if(pe(t,Qe))return e=at()||{},Math.max(parseInt(t.split(Qe)[1]),e[$e]||0);if(pe(t,et)){e=parseInt(t.split(et)[1]);if(e)return e+4}return null}());if(t=!(n&&n<9)&&t)try{(new XMLHttpRequest)[Q]={};var r=XMLHttpRequest[K].open;XMLHttpRequest[K].open=r}catch(a){t=!1,zn(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:Y(a)})}return t}function Xn(e){var t="";try{X(e)||X(e[Q])||X(e[Q].requestUrl)||(t+="(url: '"+e[Q].requestUrl+"')")}catch(n){}return t}function zn(e,t,n,r,a){y(e[Fn](),1,t,n,r,a)}function Vn(e,t,n,r,a){y(e[Fn](),2,t,n,r,a)}function Wn(t,n,r){return function(e){zn(t,n,r,{ajaxDiagnosticsMessage:Xn(e.inst),exception:Y(e.err)})}}function $n(e,t){return e&&t?e.indexOf(t):-1}function Bn(e,t,n,r,a,o){var i=e.length;if(0<i){for(var u={core:t,xhr:r,input:a,init:o,traceId:n.traceID,spanId:n.spanID,traceFlags:n.traceFlags},s=0;s<i;++s){var c=e[s];if(c&&c.fn)try{c.fn.call(null,u)}catch(l){var c=u.core;y(c&&c.logger,1,64,"Dependency listener [#"+s+"] failed: "+((c=l)&&"[object Error]"===F.call(c)?c.name:d),{exception:Y(l)},!0)}}n.traceID=u.traceId,n.spanID=u.spanId,n.traceFlags=u.traceFlags}}function Jn(){this.constructor=jn}jn=ee,typeof(r=Yn=t)!==c&&null!==r&&I("Class extends value "+r+" is not a constructor or null"),D(jn,r),jn[K]=(Jn[K]=r[K],new Jn),ee.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!1,excludeRequestFromAutoTrackingPatterns:undefined,disableCorrelationHeaders:!1,distributedTracingMode:1,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:undefined,correlationHeaderExcludePatterns:undefined,appId:undefined,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"],addRequestContext:undefined}},ee.getEmptyConfig=function(){var t=this.getDefaultConfig();return V(t,function(e){t[e]=undefined}),t},ee.prototype.processTelemetry=function(e,t){this.processNext(e,t)},ee.identifier="AjaxDependencyPlugin";var Yn,i=ee;function ee(){var T,b,w,q,I,D,r,M,H,k,L,S,P,_,j,A,E,R,F,N,t,U,e=Yn.call(this)||this;return e.identifier=ee.identifier,e.priority=120,C(ee,e,function(f,i){var u=i._addHook;function e(){var e=typeof location===O&&location?location:J("location");b=T=!1,w=e&&e.host&&e.host.toLowerCase(),q=ee.getEmptyConfig(),_=S=k=H=D=I=!1,E=A=!(j={}),N=F=R=L=M=null,t=P=r=0,U=[]}function d(t){var n=!0;return(t||q.ignoreHeaders)&&B(q.ignoreHeaders,function(e){if(e.toLowerCase()==t.toLowerCase())return n=!1,-1}),n}function s(e,t,n){u(e?dn(e[K],t,n,!1):null)}function g(e,t,n){var r=!1,a=(($(t)?t:(t||{}).url||"")||"").toLowerCase();if(B(R,function(e){var t=e;$(e)&&(t=RegExp(e)),r=r||t.test(a)}),r)return r;var o=$n(a,"?"),i=$n(a,"#");return-1!==(o=-1===o||-1!==i&&i<o?i:o)&&(a=a.substring(0,o)),X(e)?X(t)||(r="object"==typeof t&&!0===t[yn]||!!n&&!0===n[yn]):r=!0===e[yn]||!0===a[yn],(r=!(r||!a||-1===function(e,t){if(e){if(e[ae])return e[ae](t,void 0);var n=e.length;try{for(var r=0;r<n;r++)if(r in e&&e[r]===t)return r}catch(a){}}return-1}(Mn,a.toLowerCase()))||r)?j[a]||(j[a]=1):j[a]&&(r=!0),r}function c(e,t){var n=!0,r=b;return X(e)||(n=!0===t||!X(e[Q])),r&&n}function p(){var e,t,n=null;return!(n=f.core&&f.core.getTraceCtx?f.core.getTraceCtx(!1):n)&&M&&M.telemetryTrace&&(e=M.telemetryTrace,t=e||{},n={getName:function(){return t.name},setName:function(e){t.name=e},getTraceId:function(){return t.traceID},setTraceId:function(e){Wt(e)&&(t.traceID=e)},getSpanId:function(){return t.parentID},setSpanId:function(e){$t(e)&&(t.parentID=e)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(e){t.traceFlags=e}}),n}function h(n){n[Q].xhrMonitoringState.stateChangeAttached=function(e,t,n,r){void 0===r&&(r=!1);var a,o,i,u,s=!1;if(e)try{var c,l=Rt("readystatechange",n),f=l,d=t,g=r,p=!1;(u=e)&&f&&f.type&&d&&(u[Lt]?(u[Lt](f.type,d,g),p=!0):u[kt]&&(u[kt]("on"+f.type,d),p=!0)),(s=p)&&jt.accept(e)&&(c={guid:_t++,evtName:l,handler:t,capture:r},a=l.type,((i=jt.get(e,"events",{},o=void 0===o||o))[a]||(i[a]=[])).push(c))}catch(h){}return s}(n,function(){try{n&&4===n.readyState&&c(n)&&((o=(a=n)[Q]).responseFinishedTime=kn(),o.status=a.status,m("xmlhttprequest",o,function(){try{var e=o.CreateTrackItem("Ajax",I,function(){var e,n,t={statusText:a.statusText,headerMap:null,correlationContext:l(a),type:a.responseType,responseText:function(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(n){}return null}(a),response:a.response};return _&&(e=a.getAllResponseHeaders())&&(e=ve(e).split(/[\r\n]+/),n={},B(e,function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");d(t)&&(n[t]=e)}),t.headerMap=n),t}),t=void 0;try{F&&(t=F({status:a.status,xhr:a}))}catch(n){Vn(f,104,"Failed to add custom defined request context as configured call back may missing a null check.")}e?(t!==undefined&&(e.properties=ne(ne({},e.properties),t)),f[Un](e)):r(null,{requestSentTime:o.requestSentTime,responseFinishedTime:o.responseFinishedTime})}finally{try{a[Q]=null}catch(n){}}},function(e){r(e,null)}))}catch(t){var e=Y(t);e&&-1!==$n(e.toLowerCase(),"c00c023f")||zn(f,16,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Xn(n),exception:e})}function r(e,t){t=t||{};t.ajaxDiagnosticsMessage=Xn(a),e&&(t.exception=Y(e)),Vn(f,14,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",t)}var a,o},N)}function l(e){try{var t,n=e.getAllResponseHeaders();if(null!==n&&-1!==$n(n.toLowerCase(),G[8]))return t=e.getResponseHeader(G[0]),Hn.getCorrelationContext(t)}catch(r){Vn(f,18,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Xn(e),exception:Y(r)})}}function v(e,t){var n;t.requestUrl&&L&&S&&(n=it())&&z(n.mark)&&(e=L+e+"#"+ ++On,n.mark(e),(e=n.getEntriesByName(e))&&1===e.length&&(t.perfMark=e[0]))}function m(o,i,u,s){var c=i.perfMark,l=it(),f=q.maxAjaxPerfLookupAttempts,d=q.ajaxPerfLookupDelay,g=i.requestUrl,p=0;!function h(){try{if(l&&c){p++;for(var e=null,t=l.getEntries(),n=t.length-1;0<=n;n--){var r=t[n];if(r){if("resource"===r.entryType)r.initiatorType!==o||-1===$n(r.name,g)&&-1===$n(g,r.name)||(e=r);else if("mark"===r.entryType&&r.name===c.name){i.perfTiming=e;break}if(r.startTime<c.startTime-1e3)break}}}!c||i.perfTiming||f<=p||!1===i["async"]?(c&&z(l.clearMarks)&&l.clearMarks(c.name),i.perfAttempts=p,u()):setTimeout(h,d)}catch(a){s(a)}}()}function x(e){var t="";try{X(e)||(t+="(url: '".concat("string"==typeof e?e:e.url,"')"))}catch(n){zn(f,15,"Failed to grab failed fetch diagnostics message",{exception:Y(n)})}return t}function y(e,r,a,o,i,u){function s(e,t,n){n=n||{};n.fetchDiagnosticsMessage=x(a),t&&(n.exception=Y(t)),Vn(f,e,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",n)}i&&(i.responseFinishedTime=kn(),i.status=r,m("fetch",i,function(){var e,t=i.CreateTrackItem("Fetch",I,u);try{F&&(e=F({status:r,request:a,response:o}))}catch(n){Vn(f,104,"Failed to add custom defined request context as configured call back may missing a null check.")}t?(e!==undefined&&(t.properties=ne(ne({},t.properties),e)),f[Un](t)):s(14,null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})},function(e){s(18,e,null)}))}function C(e){if(e&&e.headers)try{var t=e.headers.get(G[0]);return Hn.getCorrelationContext(t)}catch(n){Vn(f,18,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:x(e),exception:Y(n)})}}e(),f.initialize=function(e,t,n,r){var a,l,o;f.isInitialized()||(i.initialize(e,t,n,r),n=Mt("ajax"),o=(r=t&&t.evtNamespace&&t.evtNamespace())?Rt("xx",o=W(r)?[n].concat(r):[n,r]).ns.split("."):n,N=o,a=nn(null,t=e,f.core),q=ee.getEmptyConfig(),V(ee.getDefaultConfig(),function(e,t){q[e]=a.getConfig(ee.identifier,e,t)}),r=q.distributedTracingMode,I=q.enableRequestHeaderTracking,D=q.enableAjaxErrorStatusText,S=q.enableAjaxPerfTracking,P=q.maxAjaxCallsPerView,_=q.enableResponseHeaderTracking,R=q.excludeRequestFromAutoTrackingPatterns,F=q.addRequestContext,k=0===r||1===r,H=1===r||2===r,S&&(n=t.instrumentationKey||"unkwn",L=5<n.length?Rn+n.substring(n.length-5)+".":Rn+n+"."),A=!!q.disableAjaxTracking,E=!!q.disableFetchTracking,!Kn(f)||A||b||(s(XMLHttpRequest,"open",{ns:N,req:function(e,t,n,r){var a,o,i,u;A||(a=(e=e.inst)[Q],!g(e,n)&&c(e,!0)&&(a&&a.xhrMonitoringState.openDone||(a=e,t=t,n=n,r=r,u=(o=p())&&o.getTraceId()||Ft(),i=Ft().substr(0,16),(u=new En(u,i,f[Fn]())).traceFlags=o&&o.getTraceFlags(),u.method=t,u.requestUrl=n,u.xhrMonitoringState.openDone=!0,u.requestHeaders={},u["async"]=r,u.errorStatusText=D,a[Q]=u),h(e)))},hkErr:Wn(f,15,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),s(XMLHttpRequest,"send",{ns:N,req:function(e,t){var n;A||(n=(e=e.inst)[Q],c(e)&&!n.xhrMonitoringState.sendDone&&(v("xhr",n),n.requestSentTime=kn(),f.includeCorrelationHeaders(n,undefined,undefined,e),n.xhrMonitoringState.sendDone=!0))},hkErr:Wn(f,17,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),s(XMLHttpRequest,"abort",{ns:N,req:function(e){var t;A||(t=(e=e.inst)[Q],c(e)&&!t.xhrMonitoringState.abortDone&&(t.aborted=1,t.xhrMonitoringState.abortDone=!0))},hkErr:Wn(f,13,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),s(XMLHttpRequest,"setRequestHeader",{ns:N,req:function(e,t,n){!A&&I&&c(e=e.inst)&&d(t)&&(e[Q].requestHeaders[t]=n)},hkErr:Wn(f,71,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),b=!0),(e=!(o=te())||X(o.Request)||X(o.Request[K])||X(o[Nn])?null:o[Nn])&&(r=te(),l=e.polyfill,E||T?l&&u(dn(r,Nn,{ns:N,req:function(e,t,n){g(null,t,n)}})):(u(dn(r,Nn,{ns:N,req:function(e,t,n){var r,a,o,i,u,s,c;E||!T||g(null,t,n)||l&&b||(r=e.ctx(),a=t,o=n,u=(i=p())&&i.getTraceId()||Ft(),s=Ft().substr(0,16),(u=new En(u,s,f[Fn]())).traceFlags=i&&i.getTraceFlags(),u.requestSentTime=kn(),u.errorStatusText=D,a instanceof Request?u.requestUrl=a?a.url:"":u.requestUrl=a,s="GET",o&&o.method?s=o.method:a&&a instanceof Request&&(s=a.method),u.method=s,c={},I&&new Headers((o?o.headers:0)||a instanceof Request&&a.headers||{}).forEach(function(e,t){d(t)&&(c[t]=e)}),u.requestHeaders=c,v("fetch",u),i=u,(s=f.includeCorrelationHeaders(i,t,n))!==n&&e.set(1,s),r.data=i)},rsp:function(e,n){var r;E||(r=e.ctx().data)&&(e.rslt=e.rslt.then(function(t){return y(0,(t||{}).status,n,t,r,function(){var n,e={statusText:t.statusText,headerMap:null,correlationContext:C(t)};return _&&(n={},t.headers.forEach(function(e,t){d(t)&&(n[t]=e)}),e.headerMap=n),e}),t})["catch"](function(e){throw y(0,0,n,null,r,null,e.message),e}))},hkErr:Wn(f,15,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),T=!0),l&&(r[Nn].polyfill=l)),(t=f.core.getPlugin("AppInsightsPropertiesPlugin"))&&(M=t.plugin.context))},f._doTeardown=function(){e()},f.trackDependencyData=function(e,t){f[Un](e,t)},f.includeCorrelationHeaders=function(e,t,n,r){var a,o,i,u,s=f._currentWindowHost||w;return Bn(U,f.core,e,r,t,n),t?(Hn.canIncludeCorrelationHeader(q,e.getAbsoluteUrl(),s)&&((n=n||{}).headers=new Headers(n.headers||t instanceof Request&&t.headers||{}),k&&(a="|"+e.traceID+"."+e.spanID,n.headers.set(G[3],a),I&&(e.requestHeaders[G[3]]=a)),(o=q.appId||M&&M.appId())&&(n.headers.set(G[0],G[2]+o),I&&(e.requestHeaders[G[0]]=G[2]+o)),H&&(X(i=e.traceFlags)&&(i=1),u=Bt(Vt(e.traceID,e.spanID,i)),n.headers.set(G[4],u),I&&(e.requestHeaders[G[4]]=u))),n):r?(Hn.canIncludeCorrelationHeader(q,e.getAbsoluteUrl(),s)&&(k&&(a="|"+e.traceID+"."+e.spanID,r.setRequestHeader(G[3],a),I&&(e.requestHeaders[G[3]]=a)),(o=q.appId||M&&M.appId())&&(r.setRequestHeader(G[0],G[2]+o),I&&(e.requestHeaders[G[0]]=G[2]+o)),H&&(X(i=e.traceFlags)&&(i=1),u=Bt(Vt(e.traceID,e.spanID,i)),r.setRequestHeader(G[4],u),I&&(e.requestHeaders[G[4]]=u))),r):undefined},f[Un]=function(e,t,n){-1===P||r<P?(2!==q.distributedTracingMode&&1!==q.distributedTracingMode||"string"!=typeof e.id||"."===e.id[e.id.length-1]||(e.id+="."),X(e.startTime)&&(e.startTime=new Date),e=function(e,t,n,r,a,o){if(n=Z(r,n)||Cn,X(e)||X(t)||X(n))throw Error("Input doesn't contain all required fields");var r="",i=(e[Tn]&&(r=e[Tn],delete e[Tn]),{name:n,time:function(e){if(e){if(oe)return e[re]();var t;return e&&e.getUTCFullYear?(t=function(e){e=""+e;return 1===e.length?"0"+e:e},e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"):void 0}}(new Date),iKey:r,ext:o||{},tags:[],data:{},baseType:t,baseData:e});return X(a)||V(a,function(e,t){i.data[e]=t}),i}(e,Sn.dataType,Sn.envelopeType,f[Fn](),t,n),f.core.track(e)):r===P&&zn(f,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++r},f.addDependencyListener=function(e){var n={id:t++,fn:e};return U.push(n),{remove:function(){B(U,function(e,t){if(e.id===n.id)return U.splice(t,1),-1})}}}}),e}e.AjaxPlugin=i,e.ajaxRecord=En;t=e,r="__esModule",i={value:!0},e=Object.defineProperty;if(e)try{return void e(t,r,i)}catch(er){}typeof i.value!==undefined&&(t[r]=i.value)};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-dependencies-js.min.js.map
